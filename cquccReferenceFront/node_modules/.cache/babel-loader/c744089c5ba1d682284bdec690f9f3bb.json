{"remainingRequest":"F:\\cqucc\\cquccReferenceSystem\\cquccReferenceFront\\node_modules\\babel-loader\\lib\\index.js!F:\\cqucc\\cquccReferenceSystem\\cquccReferenceFront\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\cqucc\\cquccReferenceSystem\\cquccReferenceFront\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\cqucc\\cquccReferenceSystem\\cquccReferenceFront\\src\\components\\Admin.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\cqucc\\cquccReferenceSystem\\cquccReferenceFront\\src\\components\\Admin.vue","mtime":1675361452804},{"path":"F:\\cqucc\\cquccReferenceSystem\\cquccReferenceFront\\babel.config.js","mtime":1668948623791},{"path":"F:\\cqucc\\cquccReferenceSystem\\cquccReferenceFront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1675055263274},{"path":"F:\\cqucc\\cquccReferenceSystem\\cquccReferenceFront\\node_modules\\babel-loader\\lib\\index.js","mtime":1675055263719},{"path":"F:\\cqucc\\cquccReferenceSystem\\cquccReferenceFront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1675055263274},{"path":"F:\\cqucc\\cquccReferenceSystem\\cquccReferenceFront\\node_modules\\vue-loader\\lib\\index.js","mtime":1675055264737}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.for-each\";\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nexport default {\n  name: \"\",\n  data: function data() {\n    return {\n      pickerOptions: {\n        disabledDate: function disabledDate(time) {\n          return true;\n        }\n      },\n      user: {},\n      termList: [],\n      timeList: [],\n      collegeList: [],\n      gradeList: [],\n      professionList: [],\n      courseList: [],\n      exam: {\n        term: {},\n        college: {},\n        profession: {},\n        grade: {},\n        course: {},\n        week: 0,\n        time: 0,\n        startTime: '',\n        //timeList[0]\n        endTime: '',\n        //timeList[1]\n        rebuild: true,\n        online: false\n      },\n      queryInfo: {},\n      queryData: [\n        /*{loc: \"主教学楼\", room: \"101\", num1: 137, num2:82, personNum: 0, banjis: [], rebuilds: [], teachers: []},*/\n      ],\n      roomList: [],\n      classSumList: [],\n      rebuildList: [],\n      teacherList: [],\n      classSumValue: [],\n      rebuildValue: [],\n      teacherValue: [],\n      majorTeacher: {\n        teacherId: '',\n        name: ''\n      },\n      timer: '',\n      loading: false,\n      submitFlag: false,\n      submitSum: true\n    };\n  },\n  created: function created() {},\n  mounted: function mounted() {\n    this.init(); //获取数据\n    this.clickList();\n    this.clickBar();\n  },\n  methods: {\n    /*初始化 ==》 setUser() setTermList()*/init: function init() {\n      this.setUser();\n      this.setTermList();\n    },\n    /*根据token获取登录用户信息 =》 user */setUser: function setUser() {\n      this.user = JSON.parse(localStorage.getItem('user'));\n    },\n    /*获取可用学期信息 =》 termList*/setTermList: function setTermList() {\n      var _this = this;\n      this.axios.get(\"/exam/termList/\").then(function (res) {\n        console.log(res.data);\n        if (res.data.flag === true) {\n          _this.termList = res.data.data;\n        }\n      }).finally(function () {});\n    },\n    /*根据学期（exam.term）所在时间段得到可编辑的日期时间 =》 Date */setDate: function setDate() {\n      var _this2 = this;\n      if (this.exam.term.term === '' || this.exam.term.term === null) {\n        this.pickerOptions = Object.assign({}, this.pickerOptions, {\n          disabledDate: function disabledDate(time) {\n            return false;\n          }\n        });\n        return;\n      }\n      this.pickerOptions = Object.assign({}, this.pickerOptions, {\n        disabledDate: function disabledDate(time) {\n          //禁用这一天的日期  如需禁用之前之后，可把=== 替换成 > 或 <\n          var disable = time < new Date(_this2.exam.term.startTime) - 24 * 60 * 60 * 1000;\n          //循环后端返回的数据，禁用时间大于contractStartTime小于contractEndTime，注意contractStartTime要减去一天，才能真正禁用contractStartTime这一天。\n          /*data.data.forEach((item) => {\r\n              disable =\r\n                  disable ||\r\n                  (time.getTime() > new Date(item.contractStartTime).getTime() - 8.64e7 &&\r\n                      time.getTime() < new Date(item.contractEndTime).getTime()); //减去一天8.64e7\r\n          });*/\n          disable = disable || time.getTime() > new Date(_this2.exam.term.endTime).getTime() + 24 * 60 * 60 * 1000;\n          return disable;\n        }\n      });\n    },\n    /*根据学期（exam.term）获取在此学期及之前创建的学院信息列表 =》collegeList */setCollegeList: function setCollegeList() {\n      var _this3 = this;\n      console.log(this.exam.term);\n      this.axios.post(\"/exam/collegeList/\", this.exam.term).then(function (res) {\n        console.log(res.data);\n        if (res.data.flag === true) {\n          _this3.collegeList = res.data.data;\n        }\n      }).finally(function () {});\n    },\n    /*根据学院（exam.college）获取此学院所有的专业信息列表 =》professionList */setProfessionList: function setProfessionList() {\n      var _this4 = this;\n      var obj = {\n        college: this.exam.college,\n        term: this.exam.term\n      };\n      console.log(this.exam.college);\n      this.axios.post(\"/exam/professionList/\", obj).then(function (res) {\n        console.log(res.data);\n        if (res.data.flag === true) {\n          _this4.professionList = res.data.data;\n        }\n      }).finally(function () {});\n    },\n    /*根据专业（exam.profession）获取所有开设此专业的年级信息列表 =》professionList */setGradeList: function setGradeList() {\n      this.gradeList = [];\n      console.log(this.exam.profession.profession);\n      for (var i in this.professionList) {\n        if (this.professionList[i].profession === this.exam.profession.profession) {\n          this.gradeList.push(this.professionList[i]);\n        }\n      }\n    },\n    /*根据年级（exam.grade）获取此年级专业所有的课程信息列表 =》courseList */setCourseList: function setCourseList() {\n      var _this5 = this;\n      var obj = {\n        college: this.exam.college,\n        term: this.exam.term,\n        profession: this.exam.profession\n      };\n      console.log(\"this.exam.profession\", this.exam.profession);\n      this.axios.post(\"/exam/courseList/\", obj).then(function (res) {\n        console.log(res.data);\n        if (res.data.flag === true) {\n          _this5.courseList = res.data.data;\n        }\n      }).finally(function () {});\n    },\n    /*通过setDate()的 this.timeList 获取考试课程的开始考试时间与结束考试时间 =》 exam.startTime,exam.endTime */setExamTime: function setExamTime() {\n      this.exam.startTime = this.timeList[0];\n      this.exam.endTime = this.timeList[1];\n      var d = this.exam.term.startTime + ' 00:00:00';\n      console.log(\"this.exam.startTime\", this.exam.startTime);\n      console.log(\"this.exam.endTime\", this.exam.endTime);\n      console.log(\"this.exam.term.startTime\", d);\n      var d1 = new Date(this.exam.startTime);\n      var d2 = new Date(this.exam.endTime);\n      var d3 = new Date(d);\n      console.log(\"d3\", d3);\n      console.log(\"d1\", d1);\n      /*console.log(parseInt(d2 - d1));//两个时间相差的毫秒数\r\n      console.log(parseInt(d2 - d1) / 1000);//两个时间相差的秒数*/\n      console.log(parseInt(d1 - d3) / 1000 / 60 / 24 / 7 + 1);\n      if (parseInt(d1 - d3) > 0) {\n        this.exam.week = parseInt(parseInt(d1 - d3) / 1000 / 60 / 60 / 24 / 7) + 1;\n      } else {\n        this.exam.week = 1;\n      }\n      if (parseInt(d2 - d1) > 0) {\n        this.exam.time = parseInt(d2 - d1) / 1000 / 60; //两个时间相差的分钟数\n      } else if (parseInt(d2 - d1) === 0) {\n        this.exam.time = 0;\n      }\n      console.log(\"this.exam.week\", this.exam.week);\n      console.log(\"this.exam.time\", this.exam.time);\n    },\n    /*此函数将重新编辑考试信息，将清空已查询到的排考信息*/modifyInfo: function modifyInfo() {\n      this.submitFlag = false;\n      this.queryData = [];\n      this.roomList = [];\n      this.classSumList = [];\n      this.rebuildList = [];\n      this.teacherList = [];\n      this.classSumValue = [];\n      this.rebuildValue = [];\n      this.teacherValue = [];\n      this.majorTeacher = {\n        teacherId: '',\n        name: ''\n      };\n    },\n    /*此函数将清空头部信息*/clearInfo: function clearInfo() {\n      this.termList = [];\n      this.timeList = [];\n      this.collegeList = [];\n      this.gradeList = [];\n      this.professionList = [];\n      this.courseList = [];\n      this.exam = {\n        term: {},\n        college: {},\n        profession: {},\n        grade: {},\n        course: {},\n        week: 0,\n        time: 0,\n        startTime: '',\n        //timeList[0]\n        endTime: '',\n        //timeList[1]\n        rebuild: false,\n        online: false\n      };\n      this.queryInfo = {};\n    },\n    /*根据this.exam查询对应信息 =》 queryData:[],roomList:[], classSumList:[], rebuildList:[], teacherList:[], majorTeacher:{},*/selectClassList: function selectClassList() {\n      var _this6 = this;\n      console.log('this.exam', this.exam);\n      var examKV = {};\n      examKV[\"term\"] = \"学期\";\n      examKV[\"college\"] = \"学院\";\n      examKV[\"profession\"] = \"专业\";\n      examKV[\"grade\"] = \"年级\";\n      examKV[\"course\"] = \"课程\";\n      examKV[\"week\"] = \"周次\";\n      examKV[\"time\"] = \"时长\";\n      examKV[\"startTime\"] = \"开始时间\";\n      examKV[\"endTime\"] = \"结束时间\";\n      examKV[\"rebuild\"] = \"重修生\";\n      examKV[\"online\"] = \"考试方式\";\n      var flag = true;\n      var _loop = function _loop(key) {\n        if (_this6.exam.hasOwnProperty(key)) {\n          if (JSON.stringify(_this6.exam[key]) !== \"{}\" && _this6.exam[key] !== 0 && _this6.exam[key] !== '') {\n            console.log(key, _this6.exam[key]);\n          } else {\n            flag = false;\n            if (examKV[key] === \"时长\" || examKV[key] === \"周次\") {\n              setTimeout(function () {\n                _this6.$message.error(examKV[key] + \" 值不可为 0 ！请检查后重新编辑\");\n              }, 10);\n            } else {\n              setTimeout(function () {\n                _this6.$message.error(examKV[key] + \" 选项选择有误！请检查后重新编辑\");\n              }, 10);\n            }\n          }\n        }\n      };\n      for (var key in this.exam) {\n        _loop(key);\n      }\n      if (!flag) return;\n      this.loading = true;\n      var queryInfo = {\n        term: this.exam.term.term,\n        college: this.exam.college.college,\n        profession: this.exam.profession.profession,\n        grade: this.exam.grade.grade,\n        course: this.exam.course.course,\n        week: this.exam.week,\n        time: this.exam.time,\n        startTime: this.exam.startTime,\n        endTime: this.exam.endTime,\n        rebuild: this.exam.rebuild,\n        online: this.exam.online\n      };\n      this.queryInfo = queryInfo;\n      console.log('queryInfo', queryInfo);\n      this.queryData = [];\n      this.roomList = [];\n      this.classSumList = [];\n      this.rebuildList = [];\n      this.teacherList = [];\n      this.majorTeacher = {};\n      this.axios.post(\"/exam/queryInfo\", this.queryInfo).then(function (res) {\n        console.log(res.data);\n        if (res.data.flag && res.data.data != \"\") {\n          //获取到数据\n          _this6.submitFlag = true;\n          setTimeout(function () {\n            _this6.$message.success(res.data.msg);\n          }, 10);\n          _this6.roomList = _this6.isNull(res.data.data.roomList);\n          _this6.classSumList = _this6.isNull(res.data.data.classSumList);\n          _this6.rebuildList = _this6.isNull(res.data.data.rebuildList);\n          _this6.teacherList = _this6.isNull(res.data.data.teacherList);\n          _this6.majorTeacher = _this6.isNull(res.data.data.majorTeacher);\n          if (!_this6.queryInfo.online) {\n            //线下\n            var _iterator = _createForOfIteratorHelper(_this6.roomList),\n              _step;\n            try {\n              for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                var room = _step.value;\n                var obj = {\n                  loc: room.loc,\n                  room: room.room,\n                  num1: room.num1,\n                  num2: room.num2,\n                  personNum: 0\n                };\n                _this6.queryData.push(obj);\n              }\n            } catch (err) {\n              _iterator.e(err);\n            } finally {\n              _iterator.f();\n            }\n          } else {\n            //线上\n            _this6.queryData.push({});\n          }\n          setTimeout(function () {\n            _this6.$message.success(\"当前时段空闲监考教师人数为： \" + _this6.teacherList.length + \" 人\");\n          }, 10);\n          _this6.submitSum = false;\n        } else _this6.$message.error(res.data.msg);\n        _this6.loading = false;\n      }).finally(function () {\n        _this6.loading = false;\n      });\n    },\n    /*判断查询到的数据是否为null*/isNull: function isNull(e) {\n      if (e !== null) return e;else return \"\";\n    },\n    /*左右滑条*/clickBar: function clickBar() {\n      var handler = document.querySelector('.handler');\n      var left_box = document.querySelector('.left-box');\n      var right_box = document.querySelector('.right-box');\n      var screenWidth = window.screen.width;\n      handler.addEventListener('click', function () {\n        if (!this.classList.contains('close')) {\n          left_box.style.width = 0;\n          right_box.style.maxWidth = screenWidth + 'px';\n          this.classList.add('close');\n        } else {\n          left_box.style.width = 260 + 'px';\n          right_box.style.maxWidth = screenWidth - 260 + 'px';\n          this.classList.remove('close');\n        }\n      });\n    },\n    /*切换页面函数*/clickList: function clickList() {\n      // 获取要操作的元素\n      var items = document.querySelectorAll('.item');\n      var current_tag = document.querySelector('.current-tag');\n      var rm = document.querySelectorAll('.rm');\n\n      // 设置选中项的样式\n      function setActive() {\n        items.forEach(function (item) {\n          item.classList.remove('active');\n        });\n        this.classList.add('active');\n        current_tag.innerText = this.innerText;\n      }\n      // 为每一个li设置点击事件\n      var _loop2 = function _loop2(ix) {\n        items[ix].addEventListener('click', function () {\n          for (var i = 0; i < items.length; i++) {\n            items[i].classList.remove('active');\n            rm[i].style.display = 'none';\n          }\n          this.classList.add('active');\n          current_tag.innerText = this.innerText;\n          rm[ix].style.display = 'block';\n        });\n      };\n      for (var ix = 0; ix < items.length; ix++) {\n        _loop2(ix);\n      }\n    }\n  },\n  watch: {\n    //当前组件的侦听器\n    rebuildValue: {\n      handler: function handler(newVal, oldVal) {\n        //console.log(\"rebuildValue newVal:\",newVal, \"oldVal:\",oldVal);\n        //2.禁用选中项\n        //2.1 先全部解封\n        for (var k = 0; k < this.rebuildList.length; k++) {\n          this.rebuildList[k].disabled = false;\n        }\n        for (var i = 0; i < newVal.length; i++) {\n          //1.统计所选人数\n          this.queryData[i].personNum = 0;\n          for (var j = 0; j < this.classSumValue[i].length; j++) {\n            for (var _k = 0; _k < this.classSumList.length; _k++) {\n              if (this.classSumValue[i][j] === this.classSumList[_k].banji) {\n                this.queryData[i].personNum += this.classSumList[_k].sum;\n                break;\n              }\n            }\n          }\n          //2.2 再逐一封禁\n          for (var _j = 0; _j < this.rebuildValue[i].length; _j++) {\n            for (var _k2 = 0; _k2 < this.rebuildList.length; _k2++) {\n              if (this.rebuildValue[i][_j] === this.rebuildList[_k2].username) {\n                this.rebuildList[_k2].disabled = true;\n              }\n            }\n          }\n          this.queryData[i].personNum += this.rebuildValue[i].length;\n        }\n      },\n      deep: false\n    },\n    classSumValue: {\n      handler: function handler(newVal, oldVal) {\n        //console.log(\"classSumValue newVal:\",newVal, \"oldVal:\",oldVal);\n        //2.禁用选中项\n        //2.1 先全部解封\n        for (var k = 0; k < this.classSumList.length; k++) {\n          this.classSumList[k].disabled = false;\n        }\n        for (var i = 0; i < newVal.length; i++) {\n          //1.统计所选人数\n          this.queryData[i].personNum = 0;\n          for (var j = 0; j < this.classSumValue[i].length; j++) {\n            for (var _k3 = 0; _k3 < this.classSumList.length; _k3++) {\n              if (this.classSumValue[i][j] === this.classSumList[_k3].banji) {\n                this.queryData[i].personNum += this.classSumList[_k3].sum;\n                //2.2 再逐一封禁\n                this.classSumList[_k3].disabled = true;\n              }\n            }\n          }\n          this.queryData[i].personNum += this.rebuildValue[i].length;\n        }\n      },\n      deep: false\n    },\n    teacherValue: {\n      handler: function handler(newVal, oldVal) {\n        //console.log(\"teacherValue newVal:\",newVal, \"oldVal:\",oldVal);\n        //2.禁用选中项\n        //2.1 先全部解封\n        for (var k = 0; k < this.teacherList.length; k++) {\n          this.teacherList[k].disabled = false;\n        }\n        for (var i = 0; i < newVal.length; i++) {\n          for (var j = 0; j < this.teacherValue[i].length; j++) {\n            for (var _k4 = 0; _k4 < this.teacherList.length; _k4++) {\n              if (this.teacherValue[i][j] === this.teacherList[_k4].username) {\n                //2.2 再逐一封禁\n                this.teacherList[_k4].disabled = true;\n              }\n            }\n          }\n        }\n      },\n      deep: false\n    },\n    'exam.term': function examTerm(newVal, oldVal) {\n      console.log(\"exam.term newVal:\", newVal, \"oldVal:\", oldVal);\n      if (JSON.stringify(newVal) !== JSON.stringify(oldVal)) {\n        this.exam.college = {};\n        this.setDate();\n        this.setCollegeList();\n      }\n    },\n    'exam.college': function examCollege(newVal, oldVal) {\n      console.log(\"exam.college newVal:\", newVal, \"oldVal:\", oldVal);\n      if (JSON.stringify(newVal) !== JSON.stringify(oldVal)) {\n        this.exam.profession = {};\n        this.setProfessionList();\n      }\n    },\n    'exam.profession': function examProfession(newVal, oldVal) {\n      console.log(\"exam.profession newVal:\", newVal, \"oldVal:\", oldVal);\n      if (JSON.stringify(newVal) !== JSON.stringify(oldVal)) {\n        this.exam.grade = {};\n        this.setGradeList();\n      }\n    },\n    'exam.grade': function examGrade(newVal, oldVal) {\n      console.log(\"exam.grade newVal:\", newVal, \"oldVal:\", oldVal);\n      if (JSON.stringify(newVal) !== JSON.stringify(oldVal)) {\n        this.exam.course = {};\n        this.setCourseList();\n      }\n    },\n    'timeList': function timeList(newVal, oldVal) {\n      console.log(\"timeList newVal:\", newVal, \"oldVal:\", oldVal);\n      if (JSON.stringify(newVal) !== JSON.stringify(oldVal)) {\n        this.setExamTime();\n      }\n    }\n  }\n};",{"version":3,"mappings":";;;;;;;;;;;;;AA6rBA;EACAA;EACAC;IACA;MACAC;QACAC;UACA;QACA;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;QACAC;QAAA;QACAC;QAAA;QACAC;QAAAC;MACA;MACAC;MACAC;QACA;MAAA,CACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAjC;MACA;MACAkC;MACAC;MACAC;MACAC;IACA;EACA;EACAC,6BAEA;EACAC;IACA;IACA;IACA;EACA;EACAC;IACA,mCACAC;MACA;MACA;IACA;IACA,4BACAC;MACA;IACA;IACA,wBACAC;MAAA;MACA,kCACAC;QACAC;QACA;UACA;QACA;MACA,wBAEA;IACA;IACA,2CACAC;MAAA;MACA,gEACA;QACA;UACA3C;YACA;UACA;QACA;QACA;MACA;MACA;QACAA;UACA;UACA;UACA;UACA;AACA;AACA;AACA;AACA;AACA;UACA4C;UACA;QACA;MACA;IACA;IACA,oDACAC;MAAA;MACAH;MACA,sDACAD;QACAC;QACA;UACA;QACA;MACA,wBACA;IACA;IACA,sDACAI;MAAA;MACA;QAAApC;QAAAD;MAAA;MACAiC;MACA,8CACAD;QACAC;QACA;UACA;QACA;MACA,wBACA;IACA;IACA,2DACAK;MACA;MACAL;MACA;QACA;UACA;QACA;MACA;IACA;IACA,kDACAM;MAAA;MACA;QAAAtC;QAAAD;QAAAE;MAAA;MACA+B;MACA,0CACAD;QACAC;QACA;UACA;QACA;MACA,wBACA;IACA;IACA,mFACAO;MACA;MACA;MACA;MAEAP;MACAA;MACAA;MAEA;MACA;MACA;MACAA;MACAA;MACA;AACA;MACAA;MACA;QACA;MACA;QACA;MACA;MACA;QACA;MACA;QACA;MACA;MAEAA;MACAA;IACA;IACA,6BACAQ;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACApB;QAAAjC;MACA;IACA;IACA,cACAsD;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA1C;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;QACAC;QAAA;QACAC;QAAA;QACAC;QAAAC;MACA;MACA;IACA;IACA,oHACAiC;MAAA;MACAV;MACA;MACAW;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACA;MAAA,gCACA;QACA;UACA;YACAX;UACA;YACAY;YACA;cACAC;gBACA;cACA;YACA;cACAA;gBACA;cACA;YACA;UAEA;QACA;MACA;MAlBA;QAAA;MAAA;MAmBA;MACA;MACA;QACA9C;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACA;MACAuB;MACA;MACA;MACA;MACA;MACA;MACA;MACA,mDACAD;QACAC;QACA;UAAA;UACA;UACAa;YACA;UACA;UAEA;UACA;UACA;UACA;UACA;UACA;YAAA;YAAA,2CACA;cAAA;YAAA;cAAA;gBAAA;gBACA;kBACAC;kBAAAC;kBAAAC;kBAAAC;kBAAAC;gBACA;gBACA;cACA;YAAA;cAAA;YAAA;cAAA;YAAA;UACA,OACA;YAAA;YACA;UACA;UACAL;YACA;UACA;UACA;QACA,OACA;QACA;MACA;QACA;MACA;IACA;IACA,mBACAM;MACA,gBACA,cAEA;IACA;IACA,QACAC;MACA;MACA;MACA;MACA;MACAC;QACA;UACAC;UACAC;UACA;QACA;UACAD;UACAC;UACA;QACA;MACA;IACA;IACA,UACAC;MACA;MACA;MACA;MACA;;MAEA;MACA;QACAC;UACAC;QACA;QACA;QACAC;MACA;MACA;MAAA,iCACA;QACAF;UACA;YACAA;YACAG;UACA;UACA;UACAD;UACAC;QACA;MACA;MAVA;QAAA;MAAA;IAWA;EAEA;EACAC;IAAA;IACA5C;MACAoC;QACA;QACA;QACA;QACA;UACA;QACA;QACA;UACA;UACA;UACA;YACA;cACA;gBACA;gBACA;cACA;YACA;UACA;UACA;UACA;YACA;cACA;gBACA;cACA;YACA;UACA;UACA;QACA;MACA;MACAS;IACA;IACA9C;MACAqC;QACA;QACA;QACA;QACA;UACA;QACA;QACA;UACA;UACA;UACA;YACA;cACA;gBACA;gBACA;gBACA;cACA;YACA;UACA;UACA;QACA;MACA;MACAS;IACA;IACA5C;MACAmC;QACA;QACA;QACA;QACA;UACA;QACA;QACA;UACA;YACA;cACA;gBACA;gBACA;cACA;YACA;UACA;QACA;MACA;MACAS;IACA;IACA;MACA9B;MACA;QACA;QACA;QACA;MACA;IACA;IACA;MACAA;MACA;QACA;QACA;MACA;IACA;IACA;MACAA;MACA;QACA;QACA;MACA;IACA;IACA;MACAA;MACA;QACA;QACA;MACA;IACA;IACA;MACAA;MACA;QACA;MACA;IACA;EACA;AACA","names":["name","data","pickerOptions","disabledDate","user","termList","timeList","collegeList","gradeList","professionList","courseList","exam","term","college","profession","grade","course","week","time","startTime","endTime","rebuild","online","queryInfo","queryData","roomList","classSumList","rebuildList","teacherList","classSumValue","rebuildValue","teacherValue","majorTeacher","teacherId","timer","loading","submitFlag","submitSum","created","mounted","methods","init","setUser","setTermList","then","console","setDate","disable","setCollegeList","setProfessionList","setGradeList","setCourseList","setExamTime","modifyInfo","clearInfo","selectClassList","examKV","flag","setTimeout","loc","room","num1","num2","personNum","isNull","clickBar","handler","left_box","right_box","clickList","items","item","current_tag","rm","watch","deep"],"sourceRoot":"src/components","sources":["Admin.vue"],"sourcesContent":["<template>\r\n    <div id=\"body\" class=\"container\">\r\n        <div class=\"left-box\">\r\n            <img src=\"../images/城科考试通.png\" alt=\"\" width=\"250\" style=\"margin: 4px 0\">\r\n            <ul>\r\n                    <li class=\"item active\" @click=\"clickList\">\r\n                        <i class=\"icon icon-file\"></i>\r\n                        发布考试任务\r\n                    </li>\r\n                    <li class=\"item\" @click=\"clickList\">\r\n                        <i class=\"icon icon-album\" ></i>\r\n                        编辑人员信息\r\n                    </li>\r\n                    <li class=\"item\" @click=\"clickList\">\r\n                        <i class=\"icon icon-like\"></i>\r\n                        编辑课程信息\r\n                    </li>\r\n                    <li class=\"item\" @click=\"clickList\">\r\n                        <i class=\"icon icon-vault\"></i>\r\n                        修改考试信息\r\n                    </li>\r\n                    <li class=\"item\" @click=\"clickList\">\r\n                        <i class=\"icon icon-favorite\"></i>\r\n                        线上考题审核\r\n                    </li>\r\n                    <hr>\r\n                    <li class=\"item\" @click=\"clickList\">\r\n                        <i class=\"icon icon-transfer\"></i>\r\n                        申请中心\r\n                    </li>\r\n                    <li class=\"item\" @click=\"clickList\">\r\n                        <i class=\"icon icon-transfer\"></i>\r\n                        数据统计\r\n                    </li>\r\n                </ul>\r\n            <div class=\"user-info\">\r\n                <img src=\"../images/jzz.jpg\" alt=\"\">\r\n                <span>管理员：{{user.name}}</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"right-box\">\r\n            <div class=\"top\">\r\n                <span class=\"current-tag\">发布考试任务</span>\r\n                <div class=\"btn\">\r\n                    <i class=\"icon icon-search\"></i>\r\n                </div>\r\n                <!-- 当前时间 -->\r\n                <div class=\"showTime\" style=\"position: relative; right: 60px;top: 2px\"></div>\r\n                <div class=\"btn\" @click=\"\">\r\n                    <i class=\"icon icon-add\"></i>\r\n                </div>\r\n            </div>\r\n            <div class=\"rm\" style=\"display: block\">\r\n                <div class=\"edit\">\r\n                    <div>\r\n                        <span>学期：</span>\r\n                        <el-select v-model=\"exam.term\" placeholder=\"请选择\"  style=\"width: 130px;\" value-key=\"id\"\r\n                                   :disabled=\"submitFlag\"> <!--@change=\"setCollegeList\">-->\r\n                            <el-option\r\n                                    v-for=\"item in termList\"\r\n                                    :key=\"item.id\"\r\n                                    :label=\"item.term\"\r\n                                    :value=\"item\"\r\n                            >\r\n                            </el-option>\r\n                        </el-select>\r\n                    </div>\r\n                    <div >\r\n                        <span>学院：</span>\r\n                        <el-select v-model=\"exam.college\" placeholder=\"请选择\"  value-key=\"id\"\r\n                                   :disabled=\"submitFlag\"><!--@change=\"setProfessionList\">-->\r\n                            <el-option\r\n                                    v-for=\"item in collegeList\"\r\n                                    :key=\"item.id\"\r\n                                    :label=\"item.college\"\r\n                                    :value=\"item\"\r\n                            >\r\n                            </el-option>\r\n                        </el-select>\r\n                    </div>\r\n                    <div >\r\n                        <span>专业：</span>\r\n                        <el-select v-model=\"exam.profession\" placeholder=\"请选择\"  value-key=\"id\"\r\n                                   :disabled=\"submitFlag\"><!--@change=\"setGradeList\">-->\r\n                            <el-option\r\n                                    v-for=\"item in professionList\"\r\n                                    :key=\"item.id\"\r\n                                    :label=\"item.profession\"\r\n                                    :value=\"item\"\r\n                            >\r\n                            </el-option>\r\n                        </el-select>\r\n                    </div>\r\n                    <div >\r\n                        <span>年级：</span>\r\n                        <el-select v-model=\"exam.grade\" placeholder=\"请选择\"  value-key=\"id\" style=\"width: 110px;\"\r\n                                   :disabled=\"submitFlag\">\r\n                            <el-option\r\n                                    v-for=\"item in gradeList\"\r\n                                    :key=\"item.id\"\r\n                                    :label=\"item.grade\"\r\n                                    :value=\"item\"\r\n                            >\r\n                            </el-option>\r\n                        </el-select>\r\n                    </div>\r\n                    <div >\r\n                        <span>考试课程：</span>\r\n                        <el-select v-model=\"exam.course\" placeholder=\"请选择\"  value-key=\"id\"\r\n                                   :disabled=\"submitFlag\">\r\n                            <el-option\r\n                                    v-for=\"item in courseList\"\r\n                                    :key=\"item.id\"\r\n                                    :label=\"item.course\"\r\n                                    :value=\"item\"\r\n                            >\r\n                            </el-option>\r\n                        </el-select>\r\n\r\n                    </div>\r\n                    <div >\r\n                        <span>日期：</span>\r\n                        <el-date-picker\r\n                            v-model=\"timeList\"\r\n                            type=\"datetimerange\"\r\n                            range-separator=\"至\"\r\n                            start-placeholder=\"开始日期\"\r\n                            end-placeholder=\"结束日期\"\r\n                            value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n                            :picker-options=\"pickerOptions\"\r\n                            :disabled=\"submitFlag\">\r\n                        </el-date-picker>\r\n                    </div>\r\n                    <div >\r\n                        <span>时长：</span>\r\n                        <el-input\r\n                                style=\"width: 70px;\"\r\n                                v-model=\"exam.time\"\r\n                                :disabled=\"true\"\r\n                                >\r\n                        </el-input>\r\n                        <span> 分钟</span>\r\n                    </div>\r\n                    <div >\r\n                        <span>周次：</span>\r\n                        <el-input\r\n                                style=\"width: 50px;\"\r\n                                v-model=\"exam.week\"\r\n                                :disabled=\"true\"\r\n                                >\r\n                        </el-input>\r\n                        <span> 周</span>\r\n                    </div>\r\n                    <div >\r\n                        <span>重修生：</span>\r\n                        <el-switch\r\n                                v-model=\"exam.rebuild\"\r\n                                active-text=\"是\"\r\n                                inactive-text=\"否\"\r\n                                :disabled=\"submitFlag\">\r\n                        </el-switch>\r\n                    </div>\r\n                    <div >\r\n                        <span>方式：</span>\r\n                        <el-switch\r\n                                v-model=\"exam.online\"\r\n                                active-color=\"#13ce66\"\r\n                                inactive-color=\"#409EFF\"\r\n                                active-text=\"线上\"\r\n                                inactive-text=\"线下\"\r\n                                :disabled=\"submitFlag\">\r\n                        </el-switch>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <div >\r\n                            <el-button :disabled=\"submitFlag\" @click=\"clearInfo\">清空内容</el-button>\r\n                        </div>\r\n                        <div style=\"margin-left: 12px;\">\r\n                            <el-button type=\"primary\" @click=\"selectClassList\" :disabled=\"submitFlag\">搜索信息</el-button>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                </div>\r\n                <div class=\"table\">\r\n<!--                    element-loading-spinner=\"el-icon-loading\"\r\n                    element-loading-background=\"rgba(0, 0, 0, 0.8)\"-->\r\n                    <div v-show=\"exam.online === false && exam.rebuild === true\">\r\n                        <el-table\r\n                                v-loading=\"loading\"\r\n                                element-loading-text=\"拼命加载中\"\r\n                                :data=\"queryData\"\r\n                                height=\"500\"\r\n                                border\r\n                                stripe\r\n                                style=\"width: 100%;\"\r\n                        >\r\n                            <el-table-column\r\n                                    align=\"center\"\r\n                                    prop=\"loc\"\r\n                                    label=\"教学楼\"\r\n                                    width=\"150\"\r\n                            >\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    align=\"center\"\r\n                                    prop=\"room\"\r\n                                    sortable\r\n                                    label=\"考场号\"\r\n                                    width=\"150\"\r\n                            >\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    align=\"center\"\r\n                                    prop=\"num2\"\r\n                                    sortable\r\n                                    label=\"教室座位个数\"\r\n                                    width=\"150\"\r\n                            >\r\n                                <template slot-scope=\"scope\">\r\n                                    {{ scope.row.num2 }} / {{ scope.row.num1 }}\r\n                                </template>\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    align=\"center\"\r\n                                    prop=\"personNum\"\r\n                                    sortable\r\n                                    label=\"已选参考人数\"\r\n                                    width=\"150\"\r\n                            >\r\n                                <template slot-scope=\"scope\">\r\n                                    <el-tag size=\"medium\" :type=\"scope.row.personNum <= scope.row.num2 ? '' : 'danger'\">{{ scope.row.personNum }}</el-tag>\r\n                                </template>\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    align=\"center\"\r\n                                    label=\"考试班级\">\r\n                                <template slot-scope=\"scope\">\r\n                                    <el-select v-model.trim=\"classSumValue[ scope.$index ]\"\r\n                                               multiple placeholder=\"请选择\"\r\n                                               @change=\"$forceUpdate()\"\r\n                                               :id=\"'val' + scope.$index\"\r\n                                               :key=\"timer\">\r\n                                        <el-option\r\n                                                v-for=\"classSum in classSumList\"\r\n                                                :key=\"classSum.id\"\r\n                                                :label=\"classSum.banji + '班'\"\r\n                                                :value=\"classSum.banji\"\r\n                                                :disabled=\"classSum.disabled\"\r\n                                        >\r\n                                            <span style=\"float: left\">{{ classSum.banji }}班</span>\r\n                                            <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ classSum.sum }}人</span>\r\n                                        </el-option>\r\n                                    </el-select>\r\n                                </template>\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    align=\"center\"\r\n                                    prop=\"rebuilds\"\r\n                                    label=\"考试重修学生\">\r\n                                <template slot-scope=\"scope\">\r\n                                    <el-select v-model.trim=\"rebuildValue[ scope.$index ]\"\r\n                                               multiple placeholder=\"请选择\"\r\n                                               @change=\"$forceUpdate()\"\r\n                                               :id=\"'val' + scope.$index\"\r\n                                               :key=\"timer\">\r\n                                        <el-option\r\n                                                v-for=\"rebuild in rebuildList\"\r\n                                                :key=\"rebuild.id\"\r\n                                                :label=\"rebuild.name\"\r\n                                                :value=\"rebuild.username\"\r\n                                                :disabled=\"rebuild.disabled\"\r\n                                        >\r\n                                            <span style=\"float: left\">{{ rebuild.grade }}级{{ rebuild.name }} </span>\r\n                                            <span style=\"float: right; margin-left: 4px;color: #8492a6; font-size: 13px\"> {{ rebuild.username }}</span>\r\n                                        </el-option>\r\n                                    </el-select>\r\n                                </template>\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    align=\"center\"\r\n                                    prop=\"teachers\"\r\n                                    label=\"监考老师\">\r\n                                <template slot-scope=\"scope\">\r\n                                    <el-select v-model.trim=\"teacherValue[ scope.$index ]\"\r\n                                               multiple placeholder=\"请选择\"\r\n                                               @change=\"$forceUpdate()\"\r\n                                               :id=\"'val' + scope.$index\"\r\n                                               :key=\"timer\">\r\n                                        <el-option\r\n                                                v-for=\"teacher in teacherList\"\r\n                                                :key=\"teacher.id\"\r\n                                                :label=\"teacher.name\"\r\n                                                :value=\"teacher.username\"\r\n                                                :disabled=\"teacher.disabled\"\r\n                                        >\r\n                                            <span style=\"float: left\">{{ teacher.name }}</span>\r\n                                            <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ teacher.username }}</span>\r\n                                        </el-option>\r\n                                    </el-select>\r\n                                </template>\r\n                            </el-table-column>\r\n                        </el-table>\r\n                        <div class=\"table-footer\">\r\n                            <div>\r\n                                <div style=\"float: left;margin-left: 0;\">\r\n                                    当前可用考场个数：<span>{{queryData.length}}</span>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div>\r\n                                <div style=\"width: 280px;\">\r\n                                    <span>考试负责人：</span>\r\n                                    <div>\r\n                                        <el-input\r\n                                                style=\"width: 140px;\"\r\n                                                v-model=\"majorTeacher.name + ' ' + majorTeacher.teacherId\"\r\n                                                :disabled=\"true\"\r\n                                        >\r\n                                        </el-input>\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <el-button type=\"warning\" @click=\"modifyInfo\" :disabled=\"submitSum\">修改头部信息</el-button>\r\n                                </div>\r\n                                <div style=\"margin-left: 12px;\">\r\n                                    <el-button type=\"success\" :disabled=\"submitSum\">*智能排考</el-button>\r\n                                </div>\r\n                                <div style=\"margin-left: 12px;\">\r\n                                    <el-button type=\"primary\" :disabled=\"submitSum\">提交考试</el-button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div v-show=\"exam.online === false && exam.rebuild === false\">\r\n                        <el-table\r\n                                v-loading=\"loading\"\r\n                                element-loading-text=\"拼命加载中\"\r\n                                :data=\"queryData\"\r\n                                height=\"500\"\r\n                                border\r\n                                stripe\r\n                                style=\"width: 100%;\"\r\n                        >\r\n                            <el-table-column\r\n                                    align=\"center\"\r\n                                    prop=\"loc\"\r\n                                    label=\"教学楼\"\r\n                                    width=\"150\"\r\n                            >\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    align=\"center\"\r\n                                    prop=\"room\"\r\n                                    sortable\r\n                                    label=\"考场号\"\r\n                                    width=\"150\"\r\n                            >\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    align=\"center\"\r\n                                    prop=\"num2\"\r\n                                    sortable\r\n                                    label=\"教室座位个数\"\r\n                                    width=\"150\"\r\n                            >\r\n                                <template slot-scope=\"scope\">\r\n                                    {{ scope.row.num2 }} / {{ scope.row.num1 }}\r\n                                </template>\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    align=\"center\"\r\n                                    prop=\"personNum\"\r\n                                    sortable\r\n                                    label=\"已选参考人数\"\r\n                                    width=\"150\"\r\n                            >\r\n                                <template slot-scope=\"scope\">\r\n                                    <el-tag size=\"medium\" :type=\"scope.row.personNum <= scope.row.num2 ? '' : 'danger'\">{{ scope.row.personNum }}</el-tag>\r\n                                </template>\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    align=\"center\"\r\n                                    label=\"考试班级\">\r\n                                <template slot-scope=\"scope\">\r\n                                    <el-select v-model.trim=\"classSumValue[ scope.$index ]\"\r\n                                               multiple placeholder=\"请选择\"\r\n                                               @change=\"$forceUpdate()\"\r\n                                               :id=\"'val' + scope.$index\"\r\n                                               :key=\"timer\">\r\n                                        <el-option\r\n                                                v-for=\"classSum in classSumList\"\r\n                                                :key=\"classSum.id\"\r\n                                                :label=\"classSum.banji + '班'\"\r\n                                                :value=\"classSum.banji\"\r\n                                                :disabled=\"classSum.disabled\"\r\n                                        >\r\n                                            <span style=\"float: left\">{{ classSum.banji }}班</span>\r\n                                            <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ classSum.sum }}人</span>\r\n                                        </el-option>\r\n                                    </el-select>\r\n                                </template>\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    align=\"center\"\r\n                                    prop=\"teachers\"\r\n                                    label=\"监考老师\">\r\n                                <template slot-scope=\"scope\">\r\n                                    <el-select v-model.trim=\"teacherValue[ scope.$index ]\"\r\n                                               multiple placeholder=\"请选择\"\r\n                                               @change=\"$forceUpdate()\"\r\n                                               :id=\"'val' + scope.$index\"\r\n                                               :key=\"timer\">\r\n                                        <el-option\r\n                                                v-for=\"teacher in teacherList\"\r\n                                                :key=\"teacher.id\"\r\n                                                :label=\"teacher.name\"\r\n                                                :value=\"teacher.username\"\r\n                                                :disabled=\"teacher.disabled\"\r\n                                        >\r\n                                            <span style=\"float: left\">{{ teacher.name }}</span>\r\n                                            <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ teacher.username }}</span>\r\n                                        </el-option>\r\n                                    </el-select>\r\n                                </template>\r\n                            </el-table-column>\r\n                        </el-table>\r\n                        <div class=\"table-footer\">\r\n                            <div>\r\n                                <div style=\"float: left;margin-left: 0;\">\r\n                                    当前可用考场个数：<span>{{queryData.length}}</span>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div>\r\n                                <div style=\"width: 280px;\">\r\n                                    <span>考试负责人：</span>\r\n                                    <div>\r\n                                        <el-input\r\n                                                style=\"width: 140px;\"\r\n                                                v-model=\"majorTeacher.name + ' ' + majorTeacher.teacherId\"\r\n                                                :disabled=\"true\"\r\n                                        >\r\n                                        </el-input>\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <el-button type=\"warning\" @click=\"modifyInfo\" :disabled=\"submitSum\">修改头部信息</el-button>\r\n                                </div>\r\n                                <div style=\"margin-left: 12px;\">\r\n                                    <el-button type=\"success\" :disabled=\"submitSum\">*智能排考</el-button>\r\n                                </div>\r\n                                <div style=\"margin-left: 12px;\">\r\n                                    <el-button type=\"primary\" :disabled=\"submitSum\">提交考试</el-button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div v-show=\"exam.online === true && exam.rebuild === true\">\r\n                        <el-table\r\n                                v-loading=\"loading\"\r\n                                element-loading-text=\"拼命加载中\"\r\n                                :data=\"queryData\"\r\n                                height=\"500\"\r\n                                border\r\n                                stripe\r\n                                style=\"width: 100%;\"\r\n                        >\r\n                            <el-table-column\r\n                                    align=\"center\"\r\n                                    prop=\"personNum\"\r\n                                    sortable\r\n                                    label=\"已选参考人数\"\r\n                            >\r\n                                <template slot-scope=\"scope\">\r\n                                    <el-tag size=\"medium\" :type=\"scope.row.personNum <= scope.row.num2 ? '' : 'danger'\">{{ scope.row.personNum }}</el-tag>\r\n                                </template>\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    align=\"center\"\r\n                                    label=\"考试班级\">\r\n                                <template slot-scope=\"scope\">\r\n                                    <el-select v-model.trim=\"classSumValue[ scope.$index ]\"\r\n                                               multiple placeholder=\"请选择\"\r\n                                               @change=\"$forceUpdate()\"\r\n                                               :id=\"'val' + scope.$index\"\r\n                                               :key=\"timer\">\r\n                                        <el-option\r\n                                                v-for=\"classSum in classSumList\"\r\n                                                :key=\"classSum.id\"\r\n                                                :label=\"classSum.banji + '班'\"\r\n                                                :value=\"classSum.banji\"\r\n                                                :disabled=\"classSum.disabled\"\r\n                                        >\r\n                                            <span style=\"float: left\">{{ classSum.banji }}班</span>\r\n                                            <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ classSum.sum }}人</span>\r\n                                        </el-option>\r\n                                    </el-select>\r\n                                </template>\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    align=\"center\"\r\n                                    prop=\"rebuilds\"\r\n                                    label=\"考试重修学生\">\r\n                                <template slot-scope=\"scope\">\r\n                                    <el-select v-model.trim=\"rebuildValue[ scope.$index ]\"\r\n                                               multiple placeholder=\"请选择\"\r\n                                               @change=\"$forceUpdate()\"\r\n                                               :id=\"'val' + scope.$index\"\r\n                                               :key=\"timer\">\r\n                                        <el-option\r\n                                                v-for=\"rebuild in rebuildList\"\r\n                                                :key=\"rebuild.id\"\r\n                                                :label=\"rebuild.name\"\r\n                                                :value=\"rebuild.username\"\r\n                                                :disabled=\"rebuild.disabled\"\r\n                                        >\r\n                                            <span style=\"float: left\">{{ rebuild.grade }}级{{ rebuild.name }}</span>\r\n                                            <span style=\"float: right; margin-left: 4px;color: #8492a6; font-size: 13px\">{{ rebuild.username }}</span>\r\n                                        </el-option>\r\n                                    </el-select>\r\n                                </template>\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    align=\"center\"\r\n                                    prop=\"teachers\"\r\n                                    label=\"监考老师\">\r\n                                <template slot-scope=\"scope\">\r\n                                    <el-select v-model.trim=\"teacherValue[ scope.$index ]\"\r\n                                               multiple placeholder=\"请选择\"\r\n                                               @change=\"$forceUpdate()\"\r\n                                               :id=\"'val' + scope.$index\"\r\n                                               :key=\"timer\">\r\n                                        <el-option\r\n                                                v-for=\"teacher in teacherList\"\r\n                                                :key=\"teacher.id\"\r\n                                                :label=\"teacher.name\"\r\n                                                :value=\"teacher.username\"\r\n                                                :disabled=\"teacher.disabled\"\r\n                                        >\r\n                                            <span style=\"float: left\">{{ teacher.name }}</span>\r\n                                            <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ teacher.username }}</span>\r\n                                        </el-option>\r\n                                    </el-select>\r\n                                </template>\r\n                            </el-table-column>\r\n                        </el-table>\r\n                        <div class=\"table-footer\">\r\n                            <div>\r\n                                <div style=\"float: left;margin-left: 0;\">\r\n<!--                                    当前可用考场个数：<span>{{queryData.length}}</span>-->\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div>\r\n                                <div style=\"width: 280px;\">\r\n                                    <span>考试负责人：</span>\r\n                                    <div>\r\n                                        <el-input\r\n                                                style=\"width: 140px;\"\r\n                                                v-model=\"majorTeacher.name + ' ' + majorTeacher.teacherId\"\r\n                                                :disabled=\"true\"\r\n                                        >\r\n                                        </el-input>\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <el-button type=\"warning\" @click=\"modifyInfo\" :disabled=\"submitSum\">修改头部信息</el-button>\r\n                                </div>\r\n                                <div style=\"margin-left: 12px;\">\r\n                                    <el-button type=\"success\" :disabled=\"submitSum\">*智能排考</el-button>\r\n                                </div>\r\n                                <div style=\"margin-left: 12px;\">\r\n                                    <el-button type=\"primary\" :disabled=\"submitSum\">提交考试</el-button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div v-show=\"exam.online === true && exam.rebuild === false\">\r\n                        <el-table\r\n                                v-loading=\"loading\"\r\n                                element-loading-text=\"拼命加载中\"\r\n                                :data=\"queryData\"\r\n                                height=\"500\"\r\n                                border\r\n                                stripe\r\n                                style=\"width: 100%;\"\r\n                        >\r\n                            <el-table-column\r\n                                    align=\"center\"\r\n                                    prop=\"personNum\"\r\n                                    sortable\r\n                                    label=\"已选参考人数\"\r\n                            >\r\n                                <template slot-scope=\"scope\">\r\n                                    <el-tag size=\"medium\" :type=\"scope.row.personNum <= scope.row.num2 ? '' : 'danger'\">{{ scope.row.personNum }}</el-tag>\r\n                                </template>\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    align=\"center\"\r\n                                    label=\"考试班级\">\r\n                                <template slot-scope=\"scope\">\r\n                                    <el-select v-model.trim=\"classSumValue[ scope.$index ]\"\r\n                                               multiple placeholder=\"请选择\"\r\n                                               @change=\"$forceUpdate()\"\r\n                                               :id=\"'val' + scope.$index\"\r\n                                               :key=\"timer\">\r\n                                        <el-option\r\n                                                v-for=\"classSum in classSumList\"\r\n                                                :key=\"classSum.id\"\r\n                                                :label=\"classSum.banji + '班'\"\r\n                                                :value=\"classSum.banji\"\r\n                                                :disabled=\"classSum.disabled\"\r\n                                        >\r\n                                            <span style=\"float: left\">{{ classSum.banji }}班</span>\r\n                                            <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ classSum.sum }}人</span>\r\n                                        </el-option>\r\n                                    </el-select>\r\n                                </template>\r\n                            </el-table-column>\r\n                            <el-table-column\r\n                                    align=\"center\"\r\n                                    prop=\"teachers\"\r\n                                    label=\"监考老师\">\r\n                                <template slot-scope=\"scope\">\r\n                                    <el-select v-model.trim=\"teacherValue[ scope.$index ]\"\r\n                                               multiple placeholder=\"请选择\"\r\n                                               @change=\"$forceUpdate()\"\r\n                                               :id=\"'val' + scope.$index\"\r\n                                               :key=\"timer\">\r\n                                        <el-option\r\n                                                v-for=\"teacher in teacherList\"\r\n                                                :key=\"teacher.id\"\r\n                                                :label=\"teacher.name\"\r\n                                                :value=\"teacher.username\"\r\n                                                :disabled=\"teacher.disabled\"\r\n                                        >\r\n                                            <span style=\"float: left\">{{ teacher.name }}</span>\r\n                                            <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ teacher.username }}</span>\r\n                                        </el-option>\r\n                                    </el-select>\r\n                                </template>\r\n                            </el-table-column>\r\n                        </el-table>\r\n                        <div class=\"table-footer\">\r\n                            <div>\r\n                                <div style=\"float: left;margin-left: 0;\">\r\n                                    <!--                                    当前可用考场个数：<span>{{queryData.length}}</span>-->\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <div>\r\n                                <div style=\"width: 280px;\">\r\n                                    <span>考试负责人：</span>\r\n                                    <div>\r\n                                        <el-input\r\n                                                style=\"width: 140px;\"\r\n                                                v-model=\"majorTeacher.name + ' ' + majorTeacher.teacherId\"\r\n                                                :disabled=\"true\"\r\n                                        >\r\n                                        </el-input>\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <el-button type=\"warning\" @click=\"modifyInfo\" :disabled=\"submitSum\">修改头部信息</el-button>\r\n                                </div>\r\n                                <div style=\"margin-left: 12px;\">\r\n                                    <el-button type=\"success\" :disabled=\"submitSum\">*智能排考</el-button>\r\n                                </div>\r\n                                <div style=\"margin-left: 12px;\">\r\n                                    <el-button type=\"primary\" :disabled=\"submitSum\">提交考试</el-button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"rm\"></div>\r\n            <div class=\"rm\"></div>\r\n            <div class=\"rm\"></div>\r\n            <div class=\"rm\"></div>\r\n            <div class=\"rm\"></div>\r\n            <div class=\"rm\">\r\n            </div>\r\n            <div class=\"handler\"></div>\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n\r\n<style scoped src=\"../css/Admin.css\">\r\n</style>\r\n<style scoped src=\"../fonts/font.css\">\r\n</style>\r\n\r\n<script>\r\n    export default {\r\n        name: \"\",\r\n        data(){\r\n            return{\r\n                pickerOptions:{\r\n                    disabledDate(time){\r\n                        return true;\r\n                    }\r\n                },\r\n                user:{},\r\n                termList:[],\r\n                timeList:[],\r\n                collegeList:[],\r\n                gradeList:[],\r\n                professionList:[],\r\n                courseList:[],\r\n                exam:{\r\n                    term: {}, college:{}, profession:{}, grade:{}, course:{}, week:0, time:0,\r\n                    startTime:'',//timeList[0]\r\n                    endTime:'',//timeList[1]\r\n                    rebuild:true, online:false\r\n                },\r\n                queryInfo:{},\r\n                queryData:[\r\n                    /*{loc: \"主教学楼\", room: \"101\", num1: 137, num2:82, personNum: 0, banjis: [], rebuilds: [], teachers: []},*/\r\n                ],\r\n                roomList:[],\r\n                classSumList:[],\r\n                rebuildList:[],\r\n                teacherList:[],\r\n                classSumValue:[],\r\n                rebuildValue:[],\r\n                teacherValue:[],\r\n                majorTeacher:{\r\n                    teacherId:'',\r\n                    name:''\r\n                },\r\n                timer:'',\r\n                loading: false,\r\n                submitFlag: false,\r\n                submitSum: true\r\n            }\r\n        },\r\n        created(){\r\n\r\n        },\r\n        mounted() {\r\n            this.init();            //获取数据\r\n            this.clickList();\r\n            this.clickBar();\r\n        },\r\n        methods:{\r\n            /*初始化 ==》 setUser() setTermList()*/\r\n            init(){\r\n                this.setUser();\r\n                this.setTermList();\r\n            },\r\n            /*根据token获取登录用户信息 =》 user */\r\n            setUser(){\r\n                this.user = JSON.parse(localStorage.getItem('user'));\r\n            },\r\n            /*获取可用学期信息 =》 termList*/\r\n            setTermList(){\r\n                this.axios.get(\"/exam/termList/\")\r\n                    .then((res) => {\r\n                        console.log(res.data);\r\n                        if(res.data.flag === true){\r\n                            this.termList = res.data.data;\r\n                        }\r\n                    }).finally(() => {\r\n\r\n                });\r\n            },\r\n            /*根据学期（exam.term）所在时间段得到可编辑的日期时间 =》 Date */\r\n            setDate(){\r\n                if(this.exam.term.term === '' || this.exam.term.term === null)\r\n                {\r\n                    this.pickerOptions = Object.assign({}, this.pickerOptions, {\r\n                        disabledDate: (time) => {\r\n                            return false;\r\n                        },\r\n                    });\r\n                    return;\r\n                }\r\n                this.pickerOptions = Object.assign({}, this.pickerOptions, {\r\n                    disabledDate: (time) => {\r\n                        //禁用这一天的日期  如需禁用之前之后，可把=== 替换成 > 或 <\r\n                        let disable = time < new Date(this.exam.term.startTime) - 24 * 60 * 60 * 1000;\r\n                        //循环后端返回的数据，禁用时间大于contractStartTime小于contractEndTime，注意contractStartTime要减去一天，才能真正禁用contractStartTime这一天。\r\n                        /*data.data.forEach((item) => {\r\n                            disable =\r\n                                disable ||\r\n                                (time.getTime() > new Date(item.contractStartTime).getTime() - 8.64e7 &&\r\n                                    time.getTime() < new Date(item.contractEndTime).getTime()); //减去一天8.64e7\r\n                        });*/\r\n                        disable = disable || time.getTime() > new Date(this.exam.term.endTime).getTime() + 24 * 60 * 60 * 1000;\r\n                        return disable;\r\n                    },\r\n                });\r\n            },\r\n            /*根据学期（exam.term）获取在此学期及之前创建的学院信息列表 =》collegeList */\r\n            setCollegeList(){\r\n                console.log(this.exam.term)\r\n                this.axios.post(\"/exam/collegeList/\", this.exam.term)\r\n                    .then((res) => {\r\n                        console.log(res.data);\r\n                        if(res.data.flag === true){\r\n                            this.collegeList = res.data.data;\r\n                        }\r\n                    }).finally(() => {\r\n                });\r\n            },\r\n            /*根据学院（exam.college）获取此学院所有的专业信息列表 =》professionList */\r\n            setProfessionList(){\r\n                let obj = {college: this.exam.college, term: this.exam.term};\r\n                console.log(this.exam.college)\r\n                this.axios.post(\"/exam/professionList/\", obj)\r\n                    .then((res) => {\r\n                        console.log(res.data);\r\n                        if(res.data.flag === true){\r\n                            this.professionList = res.data.data;\r\n                        }\r\n                    }).finally(() => {\r\n                });\r\n            },\r\n            /*根据专业（exam.profession）获取所有开设此专业的年级信息列表 =》professionList */\r\n            setGradeList(){\r\n                this.gradeList = [];\r\n                console.log(this.exam.profession.profession)\r\n                for (const i in this.professionList) {\r\n                    if(this.professionList[i].profession === this.exam.profession.profession){\r\n                        this.gradeList.push(this.professionList[i]);\r\n                    }\r\n                }\r\n            },\r\n            /*根据年级（exam.grade）获取此年级专业所有的课程信息列表 =》courseList */\r\n            setCourseList(){\r\n                let obj = {college: this.exam.college, term: this.exam.term, profession: this.exam.profession};\r\n                console.log(\"this.exam.profession\", this.exam.profession);\r\n                this.axios.post(\"/exam/courseList/\", obj)\r\n                    .then((res) => {\r\n                        console.log(res.data);\r\n                        if(res.data.flag === true){\r\n                            this.courseList = res.data.data;\r\n                        }\r\n                    }).finally(() => {\r\n                });\r\n            },\r\n            /*通过setDate()的 this.timeList 获取考试课程的开始考试时间与结束考试时间 =》 exam.startTime,exam.endTime */\r\n            setExamTime(){\r\n                this.exam.startTime = this.timeList[0];\r\n                this.exam.endTime = this.timeList[1];\r\n                let d = this.exam.term.startTime + ' 00:00:00'\r\n\r\n                console.log(\"this.exam.startTime\",this.exam.startTime);\r\n                console.log(\"this.exam.endTime\",this.exam.endTime);\r\n                console.log(\"this.exam.term.startTime\",d);\r\n\r\n                let d1 = new Date(this.exam.startTime);\r\n                let d2 = new Date(this.exam.endTime);\r\n                let d3 = new Date(d);\r\n                console.log(\"d3\", d3);\r\n                console.log(\"d1\", d1);\r\n                /*console.log(parseInt(d2 - d1));//两个时间相差的毫秒数\r\n                console.log(parseInt(d2 - d1) / 1000);//两个时间相差的秒数*/\r\n                console.log((parseInt(d1 - d3) / 1000 / 60 / 24 / 7 ) + 1)\r\n                if(parseInt(d1 - d3) > 0){\r\n                    this.exam.week = parseInt(parseInt(d1 - d3) / 1000 / 60 / 60 / 24 / 7 ) + 1;\r\n                }else{\r\n                    this.exam.week = 1;\r\n                }\r\n                if(parseInt(d2 - d1) > 0) {\r\n                    this.exam.time = parseInt(d2 - d1) / 1000 / 60;//两个时间相差的分钟数\r\n                }else if(parseInt(d2 - d1) === 0){\r\n                    this.exam.time = 0;\r\n                }\r\n\r\n                console.log(\"this.exam.week\", this.exam.week);\r\n                console.log(\"this.exam.time\", this.exam.time);\r\n            },\r\n            /*此函数将重新编辑考试信息，将清空已查询到的排考信息*/\r\n            modifyInfo(){\r\n                this.submitFlag = false;\r\n                this.queryData = [];\r\n                this.roomList = [];\r\n                this.classSumList = [];\r\n                this.rebuildList = [];\r\n                this.teacherList = [];\r\n                this.classSumValue = [];\r\n                this.rebuildValue = [];\r\n                this.teacherValue = [];\r\n                this.majorTeacher = {\r\n                    teacherId:'', name:''\r\n                };\r\n            },\r\n            /*此函数将清空头部信息*/\r\n            clearInfo(){\r\n                this.termList = [];\r\n                this.timeList = [];\r\n                this.collegeList = [];\r\n                this.gradeList = [];\r\n                this.professionList = [];\r\n                this.courseList = [];\r\n                this.exam = {\r\n                    term: {}, college:{}, profession:{}, grade:{}, course:{}, week:0, time:0,\r\n                    startTime:'',//timeList[0]\r\n                    endTime:'',//timeList[1]\r\n                    rebuild:false, online:false\r\n                }\r\n                this.queryInfo = {};\r\n            },\r\n            /*根据this.exam查询对应信息 =》 queryData:[],roomList:[], classSumList:[], rebuildList:[], teacherList:[], majorTeacher:{},*/\r\n            selectClassList(){\r\n                console.log('this.exam', this.exam);\r\n                let examKV = {};\r\n                examKV[\"term\"] = \"学期\";\r\n                examKV[\"college\"] = \"学院\";\r\n                examKV[\"profession\"] = \"专业\";\r\n                examKV[\"grade\"] = \"年级\";\r\n                examKV[\"course\"] = \"课程\";\r\n                examKV[\"week\"] = \"周次\";\r\n                examKV[\"time\"] = \"时长\";\r\n                examKV[\"startTime\"] = \"开始时间\";\r\n                examKV[\"endTime\"] = \"结束时间\";\r\n                examKV[\"rebuild\"] = \"重修生\";\r\n                examKV[\"online\"] = \"考试方式\";\r\n                let flag = true;\r\n                for (let key in this.exam) {\r\n                    if (this.exam.hasOwnProperty(key)) {\r\n                        if(JSON.stringify(this.exam[key]) !== \"{}\" && this.exam[key] !== 0 && this.exam[key] !== '') {\r\n                            console.log(key, this.exam[key]);\r\n                        }else{\r\n                            flag = false;\r\n                            if(examKV[key] === \"时长\" || examKV[key] === \"周次\"){\r\n                                setTimeout(() => {\r\n                                    this.$message.error(examKV[key] + \" 值不可为 0 ！请检查后重新编辑\");\r\n                                }, 10);\r\n                            }else{\r\n                                setTimeout(() => {\r\n                                    this.$message.error(examKV[key] + \" 选项选择有误！请检查后重新编辑\");\r\n                                }, 10);\r\n                            }\r\n\r\n                        }\r\n                    }\r\n                }\r\n                if(!flag) return;\r\n                this.loading = true;\r\n                let queryInfo = {\r\n                    term: this.exam.term.term,\r\n                    college:this.exam.college.college,\r\n                    profession:this.exam.profession.profession,\r\n                    grade:this.exam.grade.grade,\r\n                    course:this.exam.course.course,\r\n                    week:this.exam.week,\r\n                    time:this.exam.time,\r\n                    startTime:this.exam.startTime,\r\n                    endTime:this.exam.endTime,\r\n                    rebuild:this.exam.rebuild,\r\n                    online:this.exam.online,\r\n                };\r\n                this.queryInfo = queryInfo;\r\n                console.log('queryInfo', queryInfo);\r\n                this.queryData = [];\r\n                this.roomList = [];\r\n                this.classSumList = [];\r\n                this.rebuildList = [];\r\n                this.teacherList = [];\r\n                this.majorTeacher = {};\r\n                this.axios.post(\"/exam/queryInfo\", this.queryInfo)\r\n                    .then((res) => {\r\n                        console.log(res.data);\r\n                        if(res.data.flag && res.data.data != \"\"){//获取到数据\r\n                            this.submitFlag = true;\r\n                            setTimeout(() => {\r\n                                this.$message.success(res.data.msg);\r\n                            }, 10);\r\n\r\n                            this.roomList = this.isNull(res.data.data.roomList);\r\n                            this.classSumList = this.isNull(res.data.data.classSumList);\r\n                            this.rebuildList = this.isNull(res.data.data.rebuildList);\r\n                            this.teacherList = this.isNull(res.data.data.teacherList);\r\n                            this.majorTeacher = this.isNull(res.data.data.majorTeacher);\r\n                            if(!this.queryInfo.online){//线下\r\n                                for (const room of this.roomList) {\r\n                                    let obj = {\r\n                                        loc: room.loc, room: room.room, num1: room.num1, num2:room.num2, personNum: 0,\r\n                                    }\r\n                                    this.queryData.push(obj);\r\n                                }\r\n                            }\r\n                            else{//线上\r\n                                this.queryData.push({});\r\n                            }\r\n                            setTimeout(() => {\r\n                                this.$message.success(\"当前时段空闲监考教师人数为： \" + this.teacherList.length + \" 人\");\r\n                            }, 10);\r\n                            this.submitSum = false;\r\n                        }\r\n                        else this.$message.error(res.data.msg);\r\n                        this.loading = false;\r\n                    }).finally(() => {\r\n                    this.loading = false;\r\n                });\r\n            },\r\n            /*判断查询到的数据是否为null*/\r\n            isNull(e){\r\n                if(e !== null)\r\n                    return e;\r\n                else\r\n                    return \"\";\r\n            },\r\n            /*左右滑条*/\r\n            clickBar(){\r\n                let handler=document.querySelector('.handler');\r\n                let left_box=document.querySelector('.left-box');\r\n                let right_box=document.querySelector('.right-box');\r\n                let screenWidth = window.screen.width;\r\n                handler.addEventListener('click',function(){\r\n                    if(!this.classList.contains('close')){\r\n                        left_box.style.width=0;\r\n                        right_box.style.maxWidth=screenWidth +'px';\r\n                        this.classList.add('close');\r\n                    }else{\r\n                        left_box.style.width=260+'px';\r\n                        right_box.style.maxWidth=(screenWidth-260) + 'px';\r\n                        this.classList.remove('close');\r\n                    }\r\n                })\r\n            },\r\n            /*切换页面函数*/\r\n            clickList(){\r\n                // 获取要操作的元素\r\n                let items=document.querySelectorAll('.item');\r\n                let current_tag=document.querySelector('.current-tag');\r\n                let rm=document.querySelectorAll('.rm');\r\n\r\n                // 设置选中项的样式\r\n                function setActive(){\r\n                    items.forEach((item)=>{\r\n                        item.classList.remove('active');\r\n                    })\r\n                    this.classList.add('active');\r\n                    current_tag.innerText=this.innerText;\r\n                }\r\n                // 为每一个li设置点击事件\r\n                for(let ix = 0; ix < items.length; ix++){\r\n                    items[ix].addEventListener('click',function (){\r\n                        for(let i = 0; i < items.length; i++){\r\n                            items[i].classList.remove('active');\r\n                            rm[i].style.display = 'none';\r\n                        }\r\n                        this.classList.add('active');\r\n                        current_tag.innerText=this.innerText;\r\n                        rm[ix].style.display = 'block';\r\n                    });\r\n                }\r\n            },\r\n\r\n        },\r\n        watch: {//当前组件的侦听器\r\n            rebuildValue:{\r\n                handler(newVal, oldVal){\r\n                    //console.log(\"rebuildValue newVal:\",newVal, \"oldVal:\",oldVal);\r\n                    //2.禁用选中项\r\n                    //2.1 先全部解封\r\n                    for (let k = 0; k < this.rebuildList.length; k++) {\r\n                        this.rebuildList[k].disabled = false;\r\n                    }\r\n                    for(let i = 0; i < newVal.length; i++){\r\n                        //1.统计所选人数\r\n                        this.queryData[i].personNum = 0;\r\n                        for (let j = 0; j < this.classSumValue[i].length; j++) {\r\n                            for (let k = 0; k < this.classSumList.length; k++) {\r\n                                if(this.classSumValue[i][j] === this.classSumList[k].banji){\r\n                                    this.queryData[i].personNum += this.classSumList[k].sum;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                        //2.2 再逐一封禁\r\n                        for (let j = 0; j < this.rebuildValue[i].length; j++) {\r\n                            for (let k = 0; k < this.rebuildList.length; k++) {\r\n                                if(this.rebuildValue[i][j] === this.rebuildList[k].username){\r\n                                    this.rebuildList[k].disabled = true;\r\n                                }\r\n                            }\r\n                        }\r\n                        this.queryData[i].personNum += this.rebuildValue[i].length;\r\n                    }\r\n                },\r\n                deep:false\r\n            },\r\n            classSumValue:{\r\n                handler(newVal, oldVal){\r\n                    //console.log(\"classSumValue newVal:\",newVal, \"oldVal:\",oldVal);\r\n                    //2.禁用选中项\r\n                    //2.1 先全部解封\r\n                    for (let k = 0; k < this.classSumList.length; k++) {\r\n                        this.classSumList[k].disabled = false;\r\n                    }\r\n                    for(let i = 0; i < newVal.length; i++){\r\n                        //1.统计所选人数\r\n                        this.queryData[i].personNum = 0;\r\n                        for (let j = 0; j < this.classSumValue[i].length; j++) {\r\n                            for (let k = 0; k < this.classSumList.length; k++) {\r\n                                if(this.classSumValue[i][j] === this.classSumList[k].banji){\r\n                                    this.queryData[i].personNum += this.classSumList[k].sum;\r\n                                    //2.2 再逐一封禁\r\n                                    this.classSumList[k].disabled = true;\r\n                                }\r\n                            }\r\n                        }\r\n                        this.queryData[i].personNum += this.rebuildValue[i].length;\r\n                    }\r\n                },\r\n                deep:false\r\n            },\r\n            teacherValue:{\r\n                handler(newVal, oldVal){\r\n                    //console.log(\"teacherValue newVal:\",newVal, \"oldVal:\",oldVal);\r\n                    //2.禁用选中项\r\n                    //2.1 先全部解封\r\n                    for (let k = 0; k < this.teacherList.length; k++) {\r\n                        this.teacherList[k].disabled = false;\r\n                    }\r\n                    for(let i = 0; i < newVal.length; i++){\r\n                        for (let j = 0; j < this.teacherValue[i].length; j++) {\r\n                            for (let k = 0; k < this.teacherList.length; k++) {\r\n                                if(this.teacherValue[i][j] === this.teacherList[k].username){\r\n                                    //2.2 再逐一封禁\r\n                                    this.teacherList[k].disabled = true;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n                deep:false\r\n            },\r\n            'exam.term'(newVal, oldVal) {\r\n                console.log(\"exam.term newVal:\",newVal, \"oldVal:\",oldVal);\r\n                if(JSON.stringify(newVal) !== JSON.stringify(oldVal)){\r\n                    this.exam.college = {}\r\n                    this.setDate();\r\n                    this.setCollegeList();\r\n                }\r\n            },\r\n            'exam.college'(newVal, oldVal) {\r\n                console.log(\"exam.college newVal:\",newVal, \"oldVal:\",oldVal);\r\n                if(JSON.stringify(newVal) !== JSON.stringify(oldVal)){\r\n                    this.exam.profession = {}\r\n                    this.setProfessionList();\r\n                }\r\n            },\r\n            'exam.profession'(newVal, oldVal) {\r\n                console.log(\"exam.profession newVal:\",newVal, \"oldVal:\",oldVal);\r\n                if(JSON.stringify(newVal) !== JSON.stringify(oldVal)){\r\n                    this.exam.grade = {}\r\n                    this.setGradeList();\r\n                }\r\n            },\r\n            'exam.grade'(newVal, oldVal) {\r\n                console.log(\"exam.grade newVal:\",newVal, \"oldVal:\",oldVal);\r\n                if(JSON.stringify(newVal) !== JSON.stringify(oldVal)){\r\n                    this.exam.course = {}\r\n                    this.setCourseList();\r\n                }\r\n            },\r\n            'timeList'(newVal, oldVal) {\r\n                console.log(\"timeList newVal:\",newVal, \"oldVal:\",oldVal);\r\n                if(JSON.stringify(newVal) !== JSON.stringify(oldVal)){\r\n                    this.setExamTime();\r\n                }\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n"]}]}