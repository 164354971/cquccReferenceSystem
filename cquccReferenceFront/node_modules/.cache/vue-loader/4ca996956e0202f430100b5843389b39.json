{"remainingRequest":"F:\\cqucc\\cquccReferenceSystem\\cquccReferenceFront\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\cqucc\\cquccReferenceSystem\\cquccReferenceFront\\src\\components\\Admin.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\cqucc\\cquccReferenceSystem\\cquccReferenceFront\\src\\components\\Admin.vue","mtime":1674057359282},{"path":"F:\\cqucc\\cquccReferenceSystem\\cquccReferenceFront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668948602564},{"path":"F:\\cqucc\\cquccReferenceSystem\\cquccReferenceFront\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1668948599975},{"path":"F:\\cqucc\\cquccReferenceSystem\\cquccReferenceFront\\node_modules\\babel-loader\\lib\\index.js","mtime":1668948616769},{"path":"F:\\cqucc\\cquccReferenceSystem\\cquccReferenceFront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668948602564},{"path":"F:\\cqucc\\cquccReferenceSystem\\cquccReferenceFront\\node_modules\\vue-loader\\lib\\index.js","mtime":1668948614133}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    name: \"\",\n    data(){\n        return{\n            pickerOptions:{\n                disabledDate(time){\n                    return true;\n                }\n            },\n            user:{},\n            termList:[],\n            weekList:[1, 2, 3, 4, 5, 6, 7, 8, 9, 10],\n            timeList:[],\n            collegeList:[],\n            gradeList:[],\n            professionList:[],\n            courseList:[],\n            exam:{\n                term: {},\n                college:{},\n                profession:{},\n                grade:{},\n                course:{},\n                week:'',\n                time:0,\n                startTime:'',//timeList[0]\n                endTime:'',//timeList[1]\n                rebuild:false,\n                online:false,\n            },\n            queryData:[\n                /*{loc: \"主教学楼\", id: \"101\", num1: 137, num2:82, personNum: 0, banjis: [], rebuilds: [], teachers: []},\n                {loc: \"主教学楼\", id: \"102\", num1: 136, num2:82, personNum: 0, banjis: [], rebuilds: [], teachers: []},\n                {loc: \"主教学楼\", id: \"103\", num1: 135, num2:82, personNum: 0, banjis: [], rebuilds: [], teachers: []},\n                {loc: \"主教学楼\", id: \"104\", num1: 134, num2:82, personNum: 0, banjis: [], rebuilds: [], teachers: []},\n                {loc: \"主教学楼\", id: \"105\", num1: 136, num2:82, personNum: 0, banjis: [], rebuilds: [], teachers: []},\n                {loc: \"主教学楼\", id: \"106\", num1: 133, num2:82, personNum: 0, banjis: [], rebuilds: [], teachers: []},\n                {loc: \"主教学楼\", id: \"107\", num1: 137, num2:82, personNum: 0, banjis: [], rebuilds: [], teachers: []},\n                {loc: \"主教学楼\", id: \"108\", num1: 138, num2:82, personNum: 0, banjis: [], rebuilds: [], teachers: []},*/\n            ],\n            banjis:[\n                {id:1, college:'', grade:'', profession:'', banji:1, sum:30, disabled: false},\n                {id:2, college:'', grade:'', profession:'', banji:2, sum:32, disabled: false},\n                {id:3, college:'', grade:'', profession:'', banji:3, sum:33, disabled: false},\n                {id:4, college:'', grade:'', profession:'', banji:4, sum:31, disabled: false}\n            ],\n            rebuilds:[\n\n            ],\n            teachers:[\n\n            ],\n            timer:''\n        }\n    },\n    created(){\n\n    },\n    mounted() {\n        this.init();            //获取数据\n        this.clickList();\n        this.clickBar();\n    },\n    methods:{\n        /*初始化*/\n        init(){\n            this.setTermList();\n        },\n        /**/\n        setTermList(){\n            this.axios.get(\"/exam/termList/\")\n                .then((res) => {\n                    console.log(res.data);\n                    if(res.data.flag === true){\n                        this.termList = res.data.data;\n                    }\n                }).finally(() => {\n\n            });\n        },\n        setDate(){\n            if(this.exam.term.term === '' || this.exam.term.term === null)\n            {\n                this.pickerOptions = Object.assign({}, this.pickerOptions, {\n                    disabledDate: (time) => {\n                        return false;\n                    },\n                });\n                return;\n            }\n            this.pickerOptions = Object.assign({}, this.pickerOptions, {\n                disabledDate: (time) => {\n                    //禁用这一天的日期  如需禁用之前之后，可把=== 替换成 > 或 <\n                    let disable = time < new Date(this.exam.term.startTime) - 24 * 60 * 60 * 1000;\n                    //循环后端返回的数据，禁用时间大于contractStartTime小于contractEndTime，注意contractStartTime要减去一天，才能真正禁用contractStartTime这一天。\n                    /*data.data.forEach((item) => {\n                        disable =\n                            disable ||\n                            (time.getTime() > new Date(item.contractStartTime).getTime() - 8.64e7 &&\n                                time.getTime() < new Date(item.contractEndTime).getTime()); //减去一天8.64e7\n                    });*/\n                    disable = disable || time.getTime() > new Date(this.exam.term.endTime).getTime() + 24 * 60 * 60 * 1000;\n                    return disable;\n                },\n            });\n        },\n        setCollegeList(){\n            console.log(this.exam.term)\n            this.axios.post(\"/exam/collegeList/\", this.exam.term)\n                .then((res) => {\n                    console.log(res.data);\n                    if(res.data.flag === true){\n                        this.collegeList = res.data.data;\n                    }\n                }).finally(() => {\n            });\n        },\n        setProfessionList(){\n            let obj = {college: this.exam.college, term: this.exam.term};\n            console.log(this.exam.college)\n            this.axios.post(\"/exam/professionList/\", obj)\n                .then((res) => {\n                    console.log(res.data);\n                    if(res.data.flag === true){\n                        this.professionList = res.data.data;\n                    }\n                }).finally(() => {\n            });\n        },\n        setGradeList(){\n            this.gradeList = [];\n            console.log(this.exam.profession.profession)\n            for (const i in this.professionList) {\n                if(this.professionList[i].profession === this.exam.profession.profession){\n                    this.gradeList.push(this.professionList[i]);\n                }\n            }\n        },\n        setCourseList(){\n            let obj = {college: this.exam.college, term: this.exam.term, profession: this.exam.profession};\n            console.log(\"this.exam.profession\", this.exam.profession);\n            this.axios.post(\"/exam/courseList/\", obj)\n                .then((res) => {\n                    console.log(res.data);\n                    if(res.data.flag === true){\n                        this.courseList = res.data.data;\n                    }\n                }).finally(() => {\n            });\n        },\n        setExamTime(){\n            this.exam.startTime = this.timeList[0];\n            this.exam.endTime = this.timeList[1];\n            let d = this.exam.term.startTime + ' 00:00:00'\n\n            console.log(\"this.exam.startTime\",this.exam.startTime);\n            console.log(\"this.exam.endTime\",this.exam.endTime);\n            console.log(\"this.exam.term.startTime\",d);\n\n            let d1 = new Date(this.exam.startTime);\n            let d2 = new Date(this.exam.endTime);\n            let d3 = new Date(d);\n            console.log(\"d3\", d3);\n            console.log(\"d1\", d1);\n            /*console.log(parseInt(d2 - d1));//两个时间相差的毫秒数\n            console.log(parseInt(d2 - d1) / 1000);//两个时间相差的秒数*/\n            console.log((parseInt(d1 - d3) / 1000 / 60 / 24 / 7 ) + 1)\n            if(parseInt(d1 - d3) > 0){\n                this.exam.week = parseInt(parseInt(d1 - d3) / 1000 / 60 / 60 / 24 / 7 ) + 1;\n            }else{\n                this.exam.week = 1;\n            }\n            if(parseInt(d2 - d1) > 0) {\n                this.exam.time = parseInt(d2 - d1) / 1000 / 60;//两个时间相差的分钟数\n            }else if(parseInt(d2 - d1) === 0){\n                this.exam.time = 0;\n            }\n\n            console.log(\"this.exam.week\", this.exam.week);\n            console.log(\"this.exam.time\", this.exam.time);\n        },\n        clickBar(){\n            let handler=document.querySelector('.handler');\n            let left_box=document.querySelector('.left-box');\n            let right_box=document.querySelector('.right-box');\n            let screenWidth = window.screen.width;\n            handler.addEventListener('click',function(){\n                if(!this.classList.contains('close')){\n                    left_box.style.width=0;\n                    right_box.style.maxWidth=screenWidth +'px';\n                    this.classList.add('close');\n                }else{\n                    left_box.style.width=260+'px';\n                    right_box.style.maxWidth=(screenWidth-260) + 'px';\n                    this.classList.remove('close');\n                }\n            })\n        },\n        clickList(){\n            // 获取要操作的元素\n            let items=document.querySelectorAll('.item');\n            let current_tag=document.querySelector('.current-tag');\n            let rm=document.querySelectorAll('.rm');\n\n            // 设置选中项的样式\n            function setActive(){\n                items.forEach((item)=>{\n                    item.classList.remove('active');\n                })\n                this.classList.add('active');\n                current_tag.innerText=this.innerText;\n            }\n            // 为每一个li设置点击事件\n            for(let ix = 0; ix < items.length; ix++){\n                items[ix].addEventListener('click',function (){\n                    for(let i = 0; i < items.length; i++){\n                        items[i].classList.remove('active');\n                        rm[i].style.display = 'none';\n                    }\n                    this.classList.add('active');\n                    current_tag.innerText=this.innerText;\n                    rm[ix].style.display = 'block';\n                });\n            }\n        },\n        querySearchCollege(queryString, cb) {\n            var collegeList = this.collegeList;\n            var results = queryString ? collegeList.filter(this.createFilter(queryString)) : collegeList;\n            // 调用 callback 返回建议列表的数据\n            cb(results);\n        },\n        createFilter(queryString) {\n            return (item) => {\n                return (item.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0);\n            };\n        },\n        handleSelect(item) {\n            console.log(item);\n        },\n        loadAll() {\n\n        },\n    },\n    watch: {//当前组件的侦听器\n        'exam.term'(newVal, oldVal) {\n            console.log(\"exam.term newVal:\",newVal, \"oldVal:\",oldVal);\n            if(JSON.stringify(newVal) !== JSON.stringify(oldVal)){\n                this.exam.college = {}\n                this.setDate();\n                this.setCollegeList();\n            }\n        },\n        'exam.college'(newVal, oldVal) {\n            console.log(\"exam.college newVal:\",newVal, \"oldVal:\",oldVal);\n            if(JSON.stringify(newVal) !== JSON.stringify(oldVal)){\n                this.exam.profession = {}\n                this.setProfessionList();\n            }\n        },\n        'exam.profession'(newVal, oldVal) {\n            console.log(\"exam.profession newVal:\",newVal, \"oldVal:\",oldVal);\n            if(JSON.stringify(newVal) !== JSON.stringify(oldVal)){\n                this.exam.grade = {}\n                this.setGradeList();\n            }\n        },\n        'exam.grade'(newVal, oldVal) {\n            console.log(\"exam.grade newVal:\",newVal, \"oldVal:\",oldVal);\n            if(JSON.stringify(newVal) !== JSON.stringify(oldVal)){\n                this.exam.course = {}\n                this.setCourseList();\n            }\n        },\n        'timeList'(newVal, oldVal) {\n            console.log(\"timeList newVal:\",newVal, \"oldVal:\",oldVal);\n            if(JSON.stringify(newVal) !== JSON.stringify(oldVal)){\n                this.setExamTime();\n            }\n        },\n    }\n}\n",{"version":3,"sources":["Admin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Admin.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div id=\"body\" class=\"container\">\r\n        <div class=\"left-box\">\r\n            <img src=\"../images/城科考试通.png\" alt=\"\" width=\"250\" style=\"margin: 4px 0\">\r\n            <ul>\r\n                    <li class=\"item active\" @click=\"clickList\">\r\n                        <i class=\"icon icon-file\"></i>\r\n                        发布考试任务\r\n                    </li>\r\n                    <li class=\"item\" @click=\"clickList\">\r\n                        <i class=\"icon icon-album\" ></i>\r\n                        编辑人员信息\r\n                    </li>\r\n                    <li class=\"item\" @click=\"clickList\">\r\n                        <i class=\"icon icon-like\"></i>\r\n                        编辑课程信息\r\n                    </li>\r\n                    <li class=\"item\" @click=\"clickList\">\r\n                        <i class=\"icon icon-vault\"></i>\r\n                        修改考试信息\r\n                    </li>\r\n                    <li class=\"item\" @click=\"clickList\">\r\n                        <i class=\"icon icon-favorite\"></i>\r\n                        线上考题审核\r\n                    </li>\r\n                    <hr>\r\n                    <li class=\"item\" @click=\"clickList\">\r\n                        <i class=\"icon icon-transfer\"></i>\r\n                        申请中心\r\n                    </li>\r\n                    <li class=\"item\" @click=\"clickList\">\r\n                        <i class=\"icon icon-transfer\"></i>\r\n                        数据统计\r\n                    </li>\r\n                </ul>\r\n            <div class=\"user-info\">\r\n                <img src=\"../images/jzz.jpg\" alt=\"\">\r\n                <span>管理员：{{user.name}}</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"right-box\">\r\n            <div class=\"top\">\r\n                <span class=\"current-tag\">发布考试任务</span>\r\n                <div class=\"btn\">\r\n                    <i class=\"icon icon-search\"></i>\r\n                </div>\r\n                <!-- 当前时间 -->\r\n                <div class=\"showTime\" style=\"position: relative; right: 60px;top: 2px\"></div>\r\n                <div class=\"btn\" @click=\"\">\r\n                    <i class=\"icon icon-add\"></i>\r\n                </div>\r\n            </div>\r\n            <div class=\"rm\" style=\"display: block\">\r\n                <div class=\"edit\">\r\n                    <div>\r\n                        <span>学期：</span>\r\n                        <el-select v-model=\"exam.term\" placeholder=\"请选择\"  style=\"width: 130px;\" value-key=\"id\"> <!--@change=\"setCollegeList\">-->\r\n                            <el-option\r\n                                    v-for=\"item in termList\"\r\n                                    :key=\"item.id\"\r\n                                    :label=\"item.term\"\r\n                                    :value=\"item\"\r\n                            >\r\n                            </el-option>\r\n                        </el-select>\r\n                    </div>\r\n                    <div >\r\n                        <span>学院：</span>\r\n                        <el-select v-model=\"exam.college\" placeholder=\"请选择\"  value-key=\"id\"> <!--@change=\"setProfessionList\">-->\r\n                            <el-option\r\n                                    v-for=\"item in collegeList\"\r\n                                    :key=\"item.id\"\r\n                                    :label=\"item.college\"\r\n                                    :value=\"item\"\r\n                            >\r\n                            </el-option>\r\n                        </el-select>\r\n                    </div>\r\n                    <div >\r\n                        <span>专业：</span>\r\n                        <el-select v-model=\"exam.profession\" placeholder=\"请选择\"  value-key=\"id\"> <!--@change=\"setGradeList\">-->\r\n                            <el-option\r\n                                    v-for=\"item in professionList\"\r\n                                    :key=\"item.id\"\r\n                                    :label=\"item.profession\"\r\n                                    :value=\"item\"\r\n                            >\r\n                            </el-option>\r\n                        </el-select>\r\n                    </div>\r\n                    <div >\r\n                        <span>年级：</span>\r\n                        <el-select v-model=\"exam.grade\" placeholder=\"请选择\"  value-key=\"id\" style=\"width: 110px;\">\r\n                            <el-option\r\n                                    v-for=\"item in gradeList\"\r\n                                    :key=\"item.id\"\r\n                                    :label=\"item.grade\"\r\n                                    :value=\"item\"\r\n                            >\r\n                            </el-option>\r\n                        </el-select>\r\n                    </div>\r\n                    <div >\r\n                        <span>考试课程：</span>\r\n                        <el-select v-model=\"exam.course\" placeholder=\"请选择\"  value-key=\"id\">\r\n                            <el-option\r\n                                    v-for=\"item in courseList\"\r\n                                    :key=\"item.id\"\r\n                                    :label=\"item.course\"\r\n                                    :value=\"item\"\r\n                            >\r\n                            </el-option>\r\n                        </el-select>\r\n\r\n                    </div>\r\n                    <div >\r\n                        <span>日期：</span>\r\n                        <el-date-picker\r\n                            v-model=\"timeList\"\r\n                            type=\"datetimerange\"\r\n                            range-separator=\"至\"\r\n                            start-placeholder=\"开始日期\"\r\n                            end-placeholder=\"结束日期\"\r\n                            value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n                            :picker-options=\"pickerOptions\"\r\n                            >\r\n                        </el-date-picker>\r\n                    </div>\r\n                    <div >\r\n                        <span>时长：</span>\r\n                        <el-input\r\n                                style=\"width: 70px;\"\r\n                                v-model=\"exam.time\"\r\n                                :disabled=\"true\"\r\n                                >\r\n                        </el-input>\r\n                        <span> 分钟</span>\r\n                    </div>\r\n                    <div >\r\n                        <span>周次：</span>\r\n                        <el-input\r\n                                style=\"width: 50px;\"\r\n                                v-model=\"exam.week\"\r\n                                :disabled=\"true\"\r\n                                >\r\n                        </el-input>\r\n                        <span> 周</span>\r\n                    </div>\r\n                    <div >\r\n                        <span>重修生：</span>\r\n                        <el-switch\r\n                                v-model=\"exam.rebuild\"\r\n                                active-text=\"是\"\r\n                                inactive-text=\"否\">\r\n                        </el-switch>\r\n                    </div>\r\n                    <div >\r\n                        <span>方式：</span>\r\n                        <el-switch\r\n                                v-model=\"exam.online\"\r\n                                active-color=\"#13ce66\"\r\n                                inactive-color=\"#409EFF\"\r\n                                active-text=\"线上\"\r\n                                inactive-text=\"线下\">\r\n                        </el-switch>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <div >\r\n                            <el-button>清空内容</el-button>\r\n                        </div>\r\n                        <div style=\"margin-left: 12px;\">\r\n                            <el-button type=\"primary\">搜索信息</el-button>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                </div>\r\n                <div class=\"table\">\r\n                    <el-table\r\n                            :data=\"queryData\"\r\n                            height=\"500\"\r\n                            border\r\n                            stripe\r\n                            style=\"width: 100%;\"\r\n                    >\r\n                        <el-table-column\r\n                                align=\"center\"\r\n                                prop=\"loc\"\r\n                                label=\"教学楼\"\r\n                                width=\"150\"\r\n                        >\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                                align=\"center\"\r\n                                prop=\"id\"\r\n                                sortable\r\n                                label=\"考场号\"\r\n                                width=\"150\"\r\n                        >\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                                align=\"center\"\r\n                                prop=\"num1\"\r\n                                sortable\r\n                                label=\"考场座位数量\"\r\n                                width=\"150\"\r\n                        >\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                                align=\"center\"\r\n                                prop=\"num2\"\r\n                                sortable\r\n                                label=\"建议座位数量\"\r\n                                width=\"150\"\r\n                        >\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                                align=\"center\"\r\n                                prop=\"personNum\"\r\n                                sortable\r\n                                label=\"已选班级人数\"\r\n                                width=\"150\"\r\n                        >\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                                align=\"center\"\r\n                                label=\"考试班级\">\r\n                            <template slot-scope=\"scope\">\r\n                                <el-select v-model.trim=\"queryData[ scope.$index ].banjis\"\r\n                                           multiple placeholder=\"请选择\"\r\n                                           @change=\"$forceUpdate()\"\r\n                                           :id=\"'val' + scope.$index\"\r\n                                           :key=\"timer\">\r\n                                    <el-option\r\n                                            v-for=\"banji in banjis\"\r\n                                            :key=\"banji.id\"\r\n                                            :label=\"banji.banji + '班'\"\r\n                                            :value=\"banji.banji\"\r\n                                            :disabled=\"banji.disabled\"\r\n                                    >\r\n                                        <span style=\"float: left\">{{ banji.banji }}班</span>\r\n                                        <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ banji.sum }}人</span>\r\n                                    </el-option>\r\n                                </el-select>\r\n                            </template>\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                                align=\"center\"\r\n                                prop=\"rebuilds\"\r\n                                label=\"考试重修学生\">\r\n                            <template slot-scope=\"scope\">\r\n                                <el-select v-model.trim=\"queryData[ scope.$index ].banjis\"\r\n                                           multiple placeholder=\"请选择\"\r\n                                           @change=\"$forceUpdate()\"\r\n                                           :id=\"'val' + scope.$index\"\r\n                                           :key=\"timer\">\r\n                                    <el-option\r\n                                            v-for=\"banji in banjis\"\r\n                                            :key=\"banji.id\"\r\n                                            :label=\"banji.banji + '班'\"\r\n                                            :value=\"banji.banji\"\r\n                                            :disabled=\"banji.disabled\">\r\n                                    </el-option>\r\n                                </el-select>\r\n                            </template>\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                                align=\"center\"\r\n                                prop=\"teachers\"\r\n                                label=\"监考老师\">\r\n                            <template slot-scope=\"scope\">\r\n                                <el-select v-model.trim=\"queryData[ scope.$index ].banjis\"\r\n                                           multiple placeholder=\"请选择\"\r\n                                           @change=\"$forceUpdate()\"\r\n                                           :id=\"'val' + scope.$index\"\r\n                                           :key=\"timer\">\r\n                                    <el-option\r\n                                            v-for=\"banji in banjis\"\r\n                                            :key=\"banji.id\"\r\n                                            :label=\"banji.banji + '班'\"\r\n                                            :value=\"banji.banji\"\r\n                                            :disabled=\"banji.disabled\">\r\n                                    </el-option>\r\n                                </el-select>\r\n                            </template>\r\n                        </el-table-column>\r\n                    </el-table>\r\n                    <div class=\"table-footer\">\r\n                        <div>\r\n                            <div style=\"float: left;margin-left: 0;\">\r\n                                当前可用考场个数：<span>{{queryData.length}}</span>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div>\r\n                            <div style=\"width: 300px;\">\r\n                                <span>考试负责人：</span>\r\n                                <div>\r\n                                    <el-input\r\n                                            style=\"width: 140px;\"\r\n                                            v-model=\"exam.college\"\r\n                                            :disabled=\"true\"\r\n                                    >\r\n                                    </el-input>\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <el-button>*智能排考</el-button>\r\n                            </div>\r\n                            <div style=\"margin-left: 12px;\">\r\n                                <el-button type=\"primary\">提交考试</el-button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"rm\"></div>\r\n            <div class=\"rm\"></div>\r\n            <div class=\"rm\"></div>\r\n            <div class=\"rm\"></div>\r\n            <div class=\"rm\"></div>\r\n            <div class=\"rm\">\r\n            </div>\r\n            <div class=\"handler\"></div>\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n\r\n<style scoped src=\"../css/Admin.css\">\r\n</style>\r\n<style scoped src=\"../fonts/font.css\">\r\n</style>\r\n\r\n<script>\r\n    export default {\r\n        name: \"\",\r\n        data(){\r\n            return{\r\n                pickerOptions:{\r\n                    disabledDate(time){\r\n                        return true;\r\n                    }\r\n                },\r\n                user:{},\r\n                termList:[],\r\n                weekList:[1, 2, 3, 4, 5, 6, 7, 8, 9, 10],\r\n                timeList:[],\r\n                collegeList:[],\r\n                gradeList:[],\r\n                professionList:[],\r\n                courseList:[],\r\n                exam:{\r\n                    term: {},\r\n                    college:{},\r\n                    profession:{},\r\n                    grade:{},\r\n                    course:{},\r\n                    week:'',\r\n                    time:0,\r\n                    startTime:'',//timeList[0]\r\n                    endTime:'',//timeList[1]\r\n                    rebuild:false,\r\n                    online:false,\r\n                },\r\n                queryData:[\r\n                    /*{loc: \"主教学楼\", id: \"101\", num1: 137, num2:82, personNum: 0, banjis: [], rebuilds: [], teachers: []},\r\n                    {loc: \"主教学楼\", id: \"102\", num1: 136, num2:82, personNum: 0, banjis: [], rebuilds: [], teachers: []},\r\n                    {loc: \"主教学楼\", id: \"103\", num1: 135, num2:82, personNum: 0, banjis: [], rebuilds: [], teachers: []},\r\n                    {loc: \"主教学楼\", id: \"104\", num1: 134, num2:82, personNum: 0, banjis: [], rebuilds: [], teachers: []},\r\n                    {loc: \"主教学楼\", id: \"105\", num1: 136, num2:82, personNum: 0, banjis: [], rebuilds: [], teachers: []},\r\n                    {loc: \"主教学楼\", id: \"106\", num1: 133, num2:82, personNum: 0, banjis: [], rebuilds: [], teachers: []},\r\n                    {loc: \"主教学楼\", id: \"107\", num1: 137, num2:82, personNum: 0, banjis: [], rebuilds: [], teachers: []},\r\n                    {loc: \"主教学楼\", id: \"108\", num1: 138, num2:82, personNum: 0, banjis: [], rebuilds: [], teachers: []},*/\r\n                ],\r\n                banjis:[\r\n                    {id:1, college:'', grade:'', profession:'', banji:1, sum:30, disabled: false},\r\n                    {id:2, college:'', grade:'', profession:'', banji:2, sum:32, disabled: false},\r\n                    {id:3, college:'', grade:'', profession:'', banji:3, sum:33, disabled: false},\r\n                    {id:4, college:'', grade:'', profession:'', banji:4, sum:31, disabled: false}\r\n                ],\r\n                rebuilds:[\r\n\r\n                ],\r\n                teachers:[\r\n\r\n                ],\r\n                timer:''\r\n            }\r\n        },\r\n        created(){\r\n\r\n        },\r\n        mounted() {\r\n            this.init();            //获取数据\r\n            this.clickList();\r\n            this.clickBar();\r\n        },\r\n        methods:{\r\n            /*初始化*/\r\n            init(){\r\n                this.setTermList();\r\n            },\r\n            /**/\r\n            setTermList(){\r\n                this.axios.get(\"/exam/termList/\")\r\n                    .then((res) => {\r\n                        console.log(res.data);\r\n                        if(res.data.flag === true){\r\n                            this.termList = res.data.data;\r\n                        }\r\n                    }).finally(() => {\r\n\r\n                });\r\n            },\r\n            setDate(){\r\n                if(this.exam.term.term === '' || this.exam.term.term === null)\r\n                {\r\n                    this.pickerOptions = Object.assign({}, this.pickerOptions, {\r\n                        disabledDate: (time) => {\r\n                            return false;\r\n                        },\r\n                    });\r\n                    return;\r\n                }\r\n                this.pickerOptions = Object.assign({}, this.pickerOptions, {\r\n                    disabledDate: (time) => {\r\n                        //禁用这一天的日期  如需禁用之前之后，可把=== 替换成 > 或 <\r\n                        let disable = time < new Date(this.exam.term.startTime) - 24 * 60 * 60 * 1000;\r\n                        //循环后端返回的数据，禁用时间大于contractStartTime小于contractEndTime，注意contractStartTime要减去一天，才能真正禁用contractStartTime这一天。\r\n                        /*data.data.forEach((item) => {\r\n                            disable =\r\n                                disable ||\r\n                                (time.getTime() > new Date(item.contractStartTime).getTime() - 8.64e7 &&\r\n                                    time.getTime() < new Date(item.contractEndTime).getTime()); //减去一天8.64e7\r\n                        });*/\r\n                        disable = disable || time.getTime() > new Date(this.exam.term.endTime).getTime() + 24 * 60 * 60 * 1000;\r\n                        return disable;\r\n                    },\r\n                });\r\n            },\r\n            setCollegeList(){\r\n                console.log(this.exam.term)\r\n                this.axios.post(\"/exam/collegeList/\", this.exam.term)\r\n                    .then((res) => {\r\n                        console.log(res.data);\r\n                        if(res.data.flag === true){\r\n                            this.collegeList = res.data.data;\r\n                        }\r\n                    }).finally(() => {\r\n                });\r\n            },\r\n            setProfessionList(){\r\n                let obj = {college: this.exam.college, term: this.exam.term};\r\n                console.log(this.exam.college)\r\n                this.axios.post(\"/exam/professionList/\", obj)\r\n                    .then((res) => {\r\n                        console.log(res.data);\r\n                        if(res.data.flag === true){\r\n                            this.professionList = res.data.data;\r\n                        }\r\n                    }).finally(() => {\r\n                });\r\n            },\r\n            setGradeList(){\r\n                this.gradeList = [];\r\n                console.log(this.exam.profession.profession)\r\n                for (const i in this.professionList) {\r\n                    if(this.professionList[i].profession === this.exam.profession.profession){\r\n                        this.gradeList.push(this.professionList[i]);\r\n                    }\r\n                }\r\n            },\r\n            setCourseList(){\r\n                let obj = {college: this.exam.college, term: this.exam.term, profession: this.exam.profession};\r\n                console.log(\"this.exam.profession\", this.exam.profession);\r\n                this.axios.post(\"/exam/courseList/\", obj)\r\n                    .then((res) => {\r\n                        console.log(res.data);\r\n                        if(res.data.flag === true){\r\n                            this.courseList = res.data.data;\r\n                        }\r\n                    }).finally(() => {\r\n                });\r\n            },\r\n            setExamTime(){\r\n                this.exam.startTime = this.timeList[0];\r\n                this.exam.endTime = this.timeList[1];\r\n                let d = this.exam.term.startTime + ' 00:00:00'\r\n\r\n                console.log(\"this.exam.startTime\",this.exam.startTime);\r\n                console.log(\"this.exam.endTime\",this.exam.endTime);\r\n                console.log(\"this.exam.term.startTime\",d);\r\n\r\n                let d1 = new Date(this.exam.startTime);\r\n                let d2 = new Date(this.exam.endTime);\r\n                let d3 = new Date(d);\r\n                console.log(\"d3\", d3);\r\n                console.log(\"d1\", d1);\r\n                /*console.log(parseInt(d2 - d1));//两个时间相差的毫秒数\r\n                console.log(parseInt(d2 - d1) / 1000);//两个时间相差的秒数*/\r\n                console.log((parseInt(d1 - d3) / 1000 / 60 / 24 / 7 ) + 1)\r\n                if(parseInt(d1 - d3) > 0){\r\n                    this.exam.week = parseInt(parseInt(d1 - d3) / 1000 / 60 / 60 / 24 / 7 ) + 1;\r\n                }else{\r\n                    this.exam.week = 1;\r\n                }\r\n                if(parseInt(d2 - d1) > 0) {\r\n                    this.exam.time = parseInt(d2 - d1) / 1000 / 60;//两个时间相差的分钟数\r\n                }else if(parseInt(d2 - d1) === 0){\r\n                    this.exam.time = 0;\r\n                }\r\n\r\n                console.log(\"this.exam.week\", this.exam.week);\r\n                console.log(\"this.exam.time\", this.exam.time);\r\n            },\r\n            clickBar(){\r\n                let handler=document.querySelector('.handler');\r\n                let left_box=document.querySelector('.left-box');\r\n                let right_box=document.querySelector('.right-box');\r\n                let screenWidth = window.screen.width;\r\n                handler.addEventListener('click',function(){\r\n                    if(!this.classList.contains('close')){\r\n                        left_box.style.width=0;\r\n                        right_box.style.maxWidth=screenWidth +'px';\r\n                        this.classList.add('close');\r\n                    }else{\r\n                        left_box.style.width=260+'px';\r\n                        right_box.style.maxWidth=(screenWidth-260) + 'px';\r\n                        this.classList.remove('close');\r\n                    }\r\n                })\r\n            },\r\n            clickList(){\r\n                // 获取要操作的元素\r\n                let items=document.querySelectorAll('.item');\r\n                let current_tag=document.querySelector('.current-tag');\r\n                let rm=document.querySelectorAll('.rm');\r\n\r\n                // 设置选中项的样式\r\n                function setActive(){\r\n                    items.forEach((item)=>{\r\n                        item.classList.remove('active');\r\n                    })\r\n                    this.classList.add('active');\r\n                    current_tag.innerText=this.innerText;\r\n                }\r\n                // 为每一个li设置点击事件\r\n                for(let ix = 0; ix < items.length; ix++){\r\n                    items[ix].addEventListener('click',function (){\r\n                        for(let i = 0; i < items.length; i++){\r\n                            items[i].classList.remove('active');\r\n                            rm[i].style.display = 'none';\r\n                        }\r\n                        this.classList.add('active');\r\n                        current_tag.innerText=this.innerText;\r\n                        rm[ix].style.display = 'block';\r\n                    });\r\n                }\r\n            },\r\n            querySearchCollege(queryString, cb) {\r\n                var collegeList = this.collegeList;\r\n                var results = queryString ? collegeList.filter(this.createFilter(queryString)) : collegeList;\r\n                // 调用 callback 返回建议列表的数据\r\n                cb(results);\r\n            },\r\n            createFilter(queryString) {\r\n                return (item) => {\r\n                    return (item.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0);\r\n                };\r\n            },\r\n            handleSelect(item) {\r\n                console.log(item);\r\n            },\r\n            loadAll() {\r\n\r\n            },\r\n        },\r\n        watch: {//当前组件的侦听器\r\n            'exam.term'(newVal, oldVal) {\r\n                console.log(\"exam.term newVal:\",newVal, \"oldVal:\",oldVal);\r\n                if(JSON.stringify(newVal) !== JSON.stringify(oldVal)){\r\n                    this.exam.college = {}\r\n                    this.setDate();\r\n                    this.setCollegeList();\r\n                }\r\n            },\r\n            'exam.college'(newVal, oldVal) {\r\n                console.log(\"exam.college newVal:\",newVal, \"oldVal:\",oldVal);\r\n                if(JSON.stringify(newVal) !== JSON.stringify(oldVal)){\r\n                    this.exam.profession = {}\r\n                    this.setProfessionList();\r\n                }\r\n            },\r\n            'exam.profession'(newVal, oldVal) {\r\n                console.log(\"exam.profession newVal:\",newVal, \"oldVal:\",oldVal);\r\n                if(JSON.stringify(newVal) !== JSON.stringify(oldVal)){\r\n                    this.exam.grade = {}\r\n                    this.setGradeList();\r\n                }\r\n            },\r\n            'exam.grade'(newVal, oldVal) {\r\n                console.log(\"exam.grade newVal:\",newVal, \"oldVal:\",oldVal);\r\n                if(JSON.stringify(newVal) !== JSON.stringify(oldVal)){\r\n                    this.exam.course = {}\r\n                    this.setCourseList();\r\n                }\r\n            },\r\n            'timeList'(newVal, oldVal) {\r\n                console.log(\"timeList newVal:\",newVal, \"oldVal:\",oldVal);\r\n                if(JSON.stringify(newVal) !== JSON.stringify(oldVal)){\r\n                    this.setExamTime();\r\n                }\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n"]}]}